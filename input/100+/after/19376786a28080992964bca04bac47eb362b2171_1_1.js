function(e){dc._charts.push(e)},dc.hasChart=function(e){return dc._charts.indexOf(e)>=0},dc.deregisterAllCharts=function(){dc._charts=[]},dc.filterAll=function(){for(var e=0;e<dc._charts.length;++e)dc._charts[e].filterAll()},dc.renderAll=function(){for(var e=0;e<dc._charts.length;++e)dc._charts[e].render()},dc.convertISO8601Date=function(e){e=e.replace(/\D/g," ");var t=e.split(" ");return t[1]--,new Date(Date.UTC(t[0],t[1],t[2],t[3],t[4],t[5]))},dc.baseMixin=function(e){var t=null,n,r,i=t,s,o,u=0,a=0;return e.dimension=function(t){return arguments.length?(n=t,e):n},e.group=function(t){return arguments.length?(r=t,e):r},e.filter=function(t){return arguments.length?(i=t,e.dataAreSet()&&e.dimension().filter(i),e):i},e.filterAll=function(){return e.filter(t)},e.hasFilter=function(){return i!=t},e.dataAreSet=function(){return n!=undefined&&r!=undefined},e.select=function(e){return o.select(e)},e.selectAll=function(e){return o.selectAll(e)},e.anchor=function(t){return arguments.length?(s=t,o=d3.select(s),e):s},e.root=function(t){return arguments.length?(o=t,e):o},e.width=function(t){return arguments.length?(u=t,e):u},e.height=function(t){return arguments.length?(a=t,e):a},e.resetSvg=function(){e.select("svg").remove()},e.generateTopLevelG=function(){return e.root().append("svg").data([e.group().all()]).attr("width",e.width()).attr("height",e.height()).append("g")},e},dc.pieChart=function(e){var t="pie-slice",n=d3.scale.category20c(),r=0,i=0,s=dc.baseMixin({});return s.render=function(){s.resetSvg();if(s.dataAreSet()){var e=s.generateTopLevelG().attr("transform","translate("+s.cx()+","+s.cy()+")"),t=d3.layout.pie().value(function(e){return e.value}),n=s.buildArcs(),r=s.drawSlices(e,t,n);s.drawLabels(r,n),s.highlightFilter()}},s.innerRadius=function(e){return arguments.length?(i=e,s):i},s.colors=function(e){return arguments.length?(n=e,s):n},s.radius=function(e){return arguments.length?(r=e,s):r},s.cx=function(){return s.width()/2},s.cy=function(){return s.height()/2},s.buildArcs=function(){return d3.svg.arc().outerRadius(r).innerRadius(i)},s.drawSlices=function(e,r,i){var o=e.selectAll("g."+t).data(r).enter().append("g").attr("class",t);return o.append("path").attr("fill",function(e,t){return n(t)}).attr("d",i).on("click",function(e){s.filter(e.data.key),s.highlightFilter(),dc.renderAll()}),o},s.drawLabels=function(e,t){e.append("text").attr("transform",function(e){e.innerRadius=0,e.outerRadius=r;var n=t.centroid(e);return isNaN(n[0])||isNaN(n[1])?"translate(0,0)":"translate("+n+")"}).attr("text-anchor","middle").text(function(e){var t=e.data;return t.value==0?"":t.key})},s.isSelectedSlice=function(e){return s.filter()==e.data.key},s.highlightFilter=function(){s.hasFilter()&&s.selectAll("g."+t).select("path").each(function(e){s.isSelectedSlice(e)?d3.select(this).attr("fill-opacity",1).attr("stroke","#ccc").attr("stroke-width",3):d3.select(this).attr("fill-opacity",.1).attr("stroke-width",0)})},dc.registerChart(s),s.anchor(e)},dc.barChart=function(e){function o(){return n.group().top(1)[0].value}function u(){return n.height()-r.top-r.bottom}function a(){return n.height()-r.bottom}var t=5,n=dc.baseMixin({}),r={top:10,right:50,bottom:30,left:20},i,s=d3.scale.linear().range([100,0]);return n.render=function(){n.resetSvg();if(n.dataAreSet()){var e=n.generateTopLevelG().attr("transform","translate("+r.left+","+r.top+")");i.rangeRound([0,n.width()-r.left-r.right]);var f=d3.svg.axis().scale(i).orient("bottom");s.domain([0,o()]).rangeRound([u(),0]);var l=d3.svg.axis().scale(s).orient("left").ticks(t);e.selectAll("rect").data(n.group().all()).enter().append("rect").attr("x",function(e){return i(e.key)+r.left}).attr("y",function(e){return r.top+s(e.value)}).attr("width",10).attr("height",function(e){return u()-s(e.value)}),e.append("g").attr("class","axis x").attr("transform","translate("+r.left+","+a()+")").call(f),e.append("g").attr("class","axis y").attr("transform","translate("+r.left+","+r.top+")").call(l)}},n.margins=function(e){return arguments.length?(r=e,n):r},n.x=function(e){return arguments.length?(i=e,n):i},n.y=function(e){return arguments.length?(s=e,n):s},dc.registerChart(n),n.anchor(e)}