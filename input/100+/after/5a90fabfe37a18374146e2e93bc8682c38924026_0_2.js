function(enable){if(this._enabled!=enable){this._enabled=enable;if(enable){this.$input.removeAttr('disabled');}else{this.$input.attr('disabled','disabled');}
this.trigger('enabled',enable);}},toggle_enable:function(){this.enable(!this._enabled);},change:function(ev){if(this._enabled){$.ajax(this.url,{files:this.$input,iframe:true,dataType:'json',data:this.data}).always(this.uploading).done(this.done).fail(this.fail);}},done:function(data,textStatus,jqXHR){this.$el.removeClass('loading');this.collection.add(data);this.trigger('done',this.collection,data,textStatus,jqXHR);},fail:function(jqXHR){this.$el.removeClass('loading');this.trigger('fail',JSON.parse(jqXHR.responseText),jqXHR);},uploading:function(data,textStatus,jqXHR){this.$el.addClass('loading');this.trigger('uploading');this.$input.val('');}});file_upload.Views.LabelFileInput=file_upload.Views.FileInput.extend({template:'<%=text%><input type=file name=<%=name%> <%= enabled ? "" : "disabled=disabled" %> <%= multiple ? "multiple" : ""%> />',initialize:function(options){options=options||{};this._text=options.text||'Upload File';this.template=options.template||_.template(this.template);return file_upload.Views.FileInput.prototype.initialize.call(this,options);},tagName:'label',className:'file-upload',events:{'change input[type=file]':'change'},serialize:function(){return{text:this._text,name:this._name,multiple:this._multiple,enabled:this._enabled};}