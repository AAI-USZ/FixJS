function(){b.find("#header #left").hide().off();if(useAnimations)k.changePage(b.find("#main"),true,function(){k.css("visibility","hidden")});else{k.hide();b.find("#main").show().css("visibility","")}b.find("#header #title").text("Settings");ManageUserSession.isActive()&&b.find("#header #done").show();a("#main")})}},m=function(){b.positionCenterOf(window)};return{show:function(){var c,e;if(!d){d=true;b=$j("#app_settings");b.find("#main #connection #hostType").enableTap().click(function(){l("#hosts",
"Login Host",true,void 0)});b.find("#hosts table td").enableTap().click(function(){var a=$j(this);a.addClass("cellselected");ManageUserSession.setLoginHostType(this.id);j();setTimeout(function(){a.removeClass("cellselected")},100)});b.find("#main #connection #host_url input").focus(function(){g=true;$j(this).css("text-align","left")}).blur(function(){g=false;$j(this).val(ManageUserSession.getLoginHostUrl());$j(this).css("text-align","right");setTimeout(function(){$j(document.body).scrollTop(0)},10)});
b.find("#main #connection #host_url form").submit(function(){var a=b.find("#main #connection #host_url input"),d=b.find("#main #connection #host_url input").val().trim();(d=d.length==0||d.endsWith(".salesforce.com"))||alert('Custom host url must end with ".salesforce.com".');if(d){ManageUserSession.setLoginHostUrl(a.val());j();a.blur()}return false});b.find("#main #help #help_about").enableTap().click(function(){l("#about","About",true,void 0)});b.find("#main #help #help_faq").enableTap().click(function(){l("#faq",
"FAQ",true,function(){})});b.find("#main #help #help_eula").enableTap().click(function(){l("#eula","Contact Viewer EULA",true,k)});b.find("#loginbtn").off().enableTap().click(function(){prepareSession()});b.find("#logoutbtn").off().enableTap().click(function(){confirm("Logout user "+ManageUserSession.getUsername()+"?")&&logout(false)})}j();b.find("#header #title").text("Settings");b.find(".page").css("visibility","hidden");b.find("#main").css("visibility","visible");b.width()<500&&b.find("#header #left>div").text("Back");
if(ManageUserSession.isActive()){b.find("#header #done").show();b.find("#loginbtn").hide();b.find("#logoutbtn").show()}else{b.find("#loginbtn").show();b.find("#logoutbtn").hide()}f=$j("#loggedin").addOverlay();b.find("#username").setText(ManageUserSession.getUsername()||"None");b.find("#header #done").off("click").enableTap().click(function(){SettingsManager.hide();$j(this).off("click");if(!ManageUserSession.isActive())window.location=getBaseUrl()});ManageUserSession.isActive()||b.find("#header #done").hide();
c=window.innerHeight;e=(window.innerHeight-b.height())/2;b.hide().css("zIndex",$j.topZIndex(f.elem)+10).css({left:(window.innerWidth-b.width())/2});useAnimations?b.css({top:0}).show().slideIn("Y",c,e):b.css({top:e}).show();a("#main");b.orientationChange(m)},hide:function(a){var d=window.innerHeight,c=function(){b.hide();f.hide();typeof a=="function"&&a()};useAnimations?b.slideOut("Y",d,c):c();h();b.unbindOrientationChange(m)},showEula:function(a,d){