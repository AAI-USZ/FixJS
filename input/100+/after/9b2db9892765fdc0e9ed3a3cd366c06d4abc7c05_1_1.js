function(context,win){function serial(a){var b=a.name;if(a.disabled||!b){return""}b=enc(b);switch(a.tagName.toLowerCase()){case"input":switch(a.type){case"reset":case"button":case"image":case"file":return"";case"checkbox":case"radio":return a.checked?b+"="+(a.value?enc(a.value):!0)+"&":"";default:return b+"="+(a.value?enc(a.value):"")+"&"}break;case"textarea":return b+"="+enc(a.value)+"&";case"select":return b+"="+enc(a.options[a.selectedIndex].value)+"&"}return""}function enc(a){return encodeURIComponent(a)}function reqwest(a,b){return new Reqwest(a,b)}function init(o,fn){function error(a){o.error&&o.error(a),complete(a)}function success(resp){o.timeout&&clearTimeout(self.timeout)&&(self.timeout=null);var r=resp.responseText;if(r){switch(type){case"json":resp=win.JSON?win.JSON.parse(r):eval("("+r+")");break;case"js":resp=eval(r);break;case"html":resp=r}}fn(resp),o.success&&o.success(resp),complete(resp)}function complete(a){o.complete&&o.complete(a)}this.url=typeof o=="string"?o:o.url,this.timeout=null;var type=o.type||setType(this.url),self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){self.abort(),error()},o.timeout)),this.request=getRequest(o,success,error)}function setType(a){if(/\.json$/.test(a)){return"json"}if(/\.jsonp$/.test(a)){return"jsonp"}if(/\.js$/.test(a)){return"js"}if(/\.html?$/.test(a)){return"html"}if(/\.xml$/.test(a)){return"xml"}return"js"}function Reqwest(a,b){this.o=a,this.fn=b,init.apply(this,arguments)}function getRequest(a,b,c){if(a.type!="jsonp"){var f=xhr();f.open(a.method||"GET",typeof a=="string"?a:a.url,!0),setHeaders(f,a),f.onreadystatechange=handleReadyState(f,b,c),a.before&&a.before(f),f.send(a.data||null);return f}var d=doc.createElement("script"),e=0;win[getCallbackName(a)]=generalCallback,d.type="text/javascript",d.src=a.url,d.async=!0,d.onload=d.onreadystatechange=function(){if(d[readyState]&&d[readyState]!=="complete"&&d[readyState]!=="loaded"||e){return !1}d.onload=d.onreadystatechange=null,a.success&&a.success(lastValue),lastValue=undefined,head.removeChild(d),e=1},head.appendChild(d)}function generalCallback(a){lastValue=a}function getCallbackName(a){var b=a.jsonpCallback||"callback";if(a.url.slice(-(b.length+2))==b+"=?"){var c="reqwest_"+uniqid++;a.url=a.url.substr(0,a.url.length-1)+c;return c}var d=new RegExp(b+"=([\\w]+)");return a.url.match(d)[1]}function setHeaders(a,b){var c=b.headers||{};c.Accept=c.Accept||"text/javascript, text/html, application/xml, text/xml, */*",b.crossOrigin||(c["X-Requested-With"]=c["X-Requested-With"]||"XMLHttpRequest"),c[contentType]=c[contentType]||"application/x-www-form-urlencoded";for(var d in c){c.hasOwnProperty(d)&&a.setRequestHeader(d,c[d],!1)}}function handleReadyState(a,b,c){return function(){a&&a[readyState]==4&&(twoHundo.test(a.status)?b(a):c(a))}}var twoHundo=/^20\d$/,doc=document,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",head=doc[byTag]("head")[0],uniqid=0,lastValue,xhr="XMLHttpRequest" in win?function(){return new XMLHttpRequest}:function(){return new ActiveXObject("Microsoft.XMLHTTP")};Reqwest.prototype={abort:function(){this.request.abort()},retry:function(){init.call(this,this.o,this.fn)}},reqwest.serialize=function(a){var b=[a[byTag]("input"),a[byTag]("select"),a[byTag]("textarea")],c=[],d,e;for(d=0,l=b.length;d<l;++d){for(e=0,l2=b[d].length;e<l2;++e){c.push(serial(b[d][e]))}}return c.join("").replace(/&$/,"")},reqwest.serializeArray=function(a){for(var b=this.serialize(a).split("&"),c=0,d=b.length,e=[],f;c<d;c++){b[c]&&(f=b[c].split("="))&&e.push({name:f[0],value:f[1]})}return e};var old=context.reqwest;reqwest.noConflict=function(){context.reqwest=old;return this},typeof module!="undefined"?module.exports=reqwest:context.reqwest=reqwest}(this,window);wax=wax||{};wax.attribution=function(){var c,b={};function d(a){if(/^(https?:\/\/|data:image)/.test(a)){return a}}function e(a){return a}b.content=function(a){if(typeof a==="undefined"){return c.innerHTML}c.innerHTML=html_sanitize(a,d,e);return this};b.element=function(){return c};b.init=function(){c=document.createElement("div");c.className="wax-attribution";return this};return b.init()};wax=wax||{};wax.bwdetect=function(b,h){var e={},a=b.threshold||400,d="http://a.tiles.mapbox.com/mapbox/1.0.0/blue-marble-topo-bathy-jul/0/0/0.png?preventcache="+(+new Date()),g=1,f=b.auto===undefined?true:b.auto;function c(){wax.bw=-1;var j=new Image();j.src=d;var n=true;var k=setTimeout(function(){if(n&&wax.bw==-1){e.bw(0);n=false}},a);j.onload=function(){if(n&&wax.bw==-1){clearTimeout(k);e.bw(1);n=false}}}e.bw=function(j){if(!arguments.length){return g}var k=g;if(wax.bwlisteners&&wax.bwlisteners.length){(function(){listeners=wax.bwlisteners;wax.bwlisteners=[];for(i=0;i<listeners;i++){listeners[i](j)}})()}wax.bw=j;if(g!=(g=j)){h(j)}};e.add=function(){if(f){c()}return this};if(wax.bw==-1){wax.bwlisteners=wax.bwlisteners||[];wax.bwlisteners.push(e.bw)}else{if(wax.bw!==undefined){e.bw(wax.bw)}else{e.add()}}return e};wax.formatter=function(x){var formatter={},f;if(x&&typeof x==="string"){try{eval("f = "+x)}catch(e){if(console){console.log(e)}}}else{if(x&&typeof x==="function"){f=x}else{f=function(){}}}function urlX(url){if(/^(https?:\/\/|data:image)/.test(url)){return url}}function idX(id){return id}formatter.format=function(options,data){try{return html_sanitize(f(options,data),urlX,idX)}catch(e){if(console){console.log(e)}}};return formatter};wax.gi=function(b,d){d=d||{};var a={},c=d.resolution||4,f=d.tileSize||256;function e(g){if(g>=93){g--}if(g>=35){g--}g-=32;return g}a.grid_tile=function(){return b};a.getKey=function(g,h){if(!(b&&b.grid)){return}if((h<0)||(g<0)){return}if((Math.floor(h)>=f)||(Math.floor(g)>=f)){return}return e(b.grid[Math.floor((h)/c)].charCodeAt(Math.floor((g)/c)))};a.gridFeature=function(g,k){var h=this.getKey(g,k),j=b.keys;if(j&&j[h]&&b.data[j[h]]){return b.data[j[h]]}};a.tileFeature=function(h,k,g){if(!b){return}var j=wax.u.offset(g);feature=this.gridFeature(h-j.left,k-j.top);return feature};return a};wax.gm=function(){var c=4,f={},e={},g,d;var b=function(h){return h.replace(/(\.png|\.jpg|\.jpeg)(\d*)/,".grid.json")};function a(j){if(typeof j==="string"){j=[j]}return function h(n){if(!n){return}var o=new RegExp("/(\\d+)\\/(\\d+)\\/(\\d+)\\.[\\w\\._]+");var k=o.exec(n);if(!k){return}return j[parseInt(k[2],10)%j.length].replace(/\{z\}/g,k[1]).replace(/\{x\}/g,k[2]).replace(/\{y\}/g,k[3])}}e.formatter=function(h){if(!arguments.length){return d}d=wax.formatter(h);return e};e.template=function(h){if(!arguments.length){return d}d=wax.template(h);return e};e.gridUrl=function(h){if(!arguments.length){return b}b=typeof h==="function"?h:a(h);return e};e.getGrid=function(j,k){var h=b(j);if(!d||!h){return k(null,null)}wax.request.get(h,function(o,n){if(o){return k(o,null)}k(null,wax.gi(n,{formatter:d,resolution:c}))});return e};e.tilejson=function(h){if(!arguments.length){return g}if(h.template){e.template(h.template)}else{if(h.formatter){e.formatter(h.formatter)}}if(h.grids){e.gridUrl(h.grids)}if(h.resolution){c=h.resolution}g=h;return e};return e};wax=wax||{};wax.hash=function(k){k=k||{};function f(){return location.hash.substring(1)}function e(o){var n=window.location;n.replace(n.toString().replace(n.hash,"#"+o))}var h,d={},g=90-1e-8;function a(p){var n=p.split("/");for(var o=0;o<n.length;o++){n[o]=Number(n[o]);if(isNaN(n[o])){return true}}if(n.length<3){return true}else{if(n.length==3){k.setCenterZoom(n)}}}function b(){var n=k.getCenterZoom();if(h!==n){h=n;e(h)}}function c(n){if(n===h){return}if(a(h=n)){b()}}var j=wax.u.throttle(b,500);d.add=function(){c(f());k.bindChange(j);return this};d.remove=function(){k.unbindChange(j);return this};return d.add()};wax=wax||{};wax.interaction=function(){var r=wax.gm(),g={},b=false,c=false,e,p=4,a,s,w,k,v,u;var q={mousemove:h,touchstart:d,mousedown:d};var o={touchend:t,touchmove:t,touchcancel:f};function n(z){var y=a();for(var x=0;x<y.length;x++){if((y[x][0]<z.y)&&((y[x][0]+256)>z.y)&&(y[x][1]<z.x)&&((y[x][1]+256)>z.x)){return y[x][2]}}return false}function j(){if(c){window.clearTimeout(c);c=null;return true}else{return false}}function h(x){if(b){return}var y=wax.u.eventoffset(x);g.screen_feature(y,function(z){if(z){bean.fire(g,"on",{parent:k(),data:z,pos:y,formatter:r.formatter().format,e:x})}else{bean.fire(g,"off")}})}function d(x){if(j()){return}b=true;e=wax.u.eventoffset(x);if(x.type==="mousedown"){bean.add(document.body,"click",t)}else{if(x.type==="touchstart"&&x.touches.length===1){bean.fire(g,"off");bean.add(k(),o)}}}function f(){bean.remove(k(),o);b=false}function t(z){var x={},A=wax.u.eventoffset(z);b=false;for(var y in z){x[y]=z[y]}bean.remove(document.body,"mouseup",t);bean.remove(k(),o);if(z.type==="touchend"){g.click(z,e)}else{if(Math.round(A.y/p)===Math.round(e.y/p)&&Math.round(A.x/p)===Math.round(e.x/p)){c=window.setTimeout(function(){c=null;g.click(x,A)},300)}}return t}g.click=function(x,y){g.screen_feature(y,function(z){if(z){bean.fire(g,"on",{parent:k(),data:z,pos:y,formatter:r.formatter().format,e:x})}})};g.screen_feature=function(z,y){var x=n(z);if(!x){y(null)}r.getGrid(x.src,function(C,B){if(C||!B){return y(null)}var A=B.tileFeature(z.x,z.y,x);y(A)})};g.attach=function(y){if(!arguments.length){return s}s=y;return g};g.detach=function(y){if(!arguments.length){return w}w=y;return g};g.map=function(y){if(!arguments.length){return v}v=y;if(s){s(v)}bean.add(k(),q);bean.add(k(),"touchstart",d);return g};g.grid=function(y){if(!arguments.length){return a}a=y;return g};g.remove=function(y){if(w){w(v)}bean.remove(k(),q);bean.fire(g,"remove");return g};g.tilejson=function(y){if(!arguments.length){return r.tilejson()}r.tilejson(y);return g};g.formatter=function(){return r.formatter()};g.on=function(y,x){bean.add(g,y,x);return g};g.off=function(y,x){bean.remove(g,y,x);return g};g.gridmanager=function(y){if(!arguments.length){return r}r=y;return g};g.parent=function(y){k=y;return g};return g};var wax=wax||{};wax.legend=function(){var c,d={},a;function b(f){if(/^(https?:\/\/|data:image)/.test(f)){return f}}function e(f){return f}d.element=function(){return a};d.content=function(f){if(!arguments.length){return c.innerHTML}if(f){c.innerHTML=html_sanitize(f,b,e);c.style.display="block"}else{c.innerHTML="";c.style.display="none"}return d};d.add=function(){a=document.createElement("div");a.className="wax-legends";c=a.appendChild(document.createElement("div"));c.className="wax-legend";c.style.display="none";return d};return d.add()};var wax=wax||{};wax.location=function(){var b={};function a(d){console.log(d);if((d.e.type==="mousemove"||!d.e.type)){return}else{var c=d.formatter({format:"location"},d.data);if(c){window.location.href=c}}}b.events=function(){return{on:a}};return b};var wax=wax||{};wax.movetip={};wax.movetip=function(){var d=false,k={},a,b,n,j;function g(p){var o=wax.u.eventoffset(p);if((a.height+o.y)>(b.top+b.height)&&(b.height>a.height)){o.y-=a.height;n.className+=" flip-y"}if((a.width+o.x)>(b.left+b.width)){o.x-=a.width;n.className+=" flip-x"}n.style.left=o.x+"px";n.style.top=o.y+"px"}function h(o){var p=document.createElement("div");p.className="wax-tooltip wax-tooltip-0";p.innerHTML=o;return p}function e(){if(n){n.parentNode.removeChild(n);n=null}}function f(t){var r;if(d){return}if((t.e.type==="mousemove"||!t.e.type)){r=t.formatter({format:"teaser"},t.data);if(!r){return}e();j.style.cursor="pointer";n=document.body.appendChild(h(r))}else{r=t.formatter({format:"teaser"},t.data);if(!r){return}e();var p=document.body.appendChild(h(r));p.className+=" wax-popup";var s=p.appendChild(document.createElement("a"));s.href="#close";s.className="close";s.innerHTML="Close";d=true;n=p;a=wax.u.offset(n);b=wax.u.offset(j);g(t.e);bean.add(s,"click touchend",function q(o){o.stop();e();d=false})}if(n){a=wax.u.offset(n);b=wax.u.offset(j);g(t.e)}}function c(){j.style.cursor="default";if(!d){e()}}k.parent=function(o){if(!arguments.length){return j}j=o;return k};k.events=function(){return{on:f,off:c}};return k};var wax=wax||{};wax.request={cache:{},locks:{},promises:{},get:function(a,c){if(this.cache[a]){return c(this.cache[a][0],this.cache[a][1])}else{this.promises[a]=this.promises[a]||[];this.promises[a].push(c);if(this.locks[a]){return}var b=this;this.locks[a]=true;reqwest({url:a+(~a.indexOf("?")?"&":"?")+"callback=grid",type:"jsonp",jsonpCallback:"callback",success:function(e){b.locks[a]=false;b.cache[a]=[null,e];for(var d=0;d<b.promises[a].length;d++){b.promises[a][d](b.cache[a][0],b.cache[a][1])}},error:function(e){b.locks[a]=false;b.cache[a]=[e,null];for(var d=0;d<b.promises[a].length;d++){b.promises[a][d](b.cache[a][0],b.cache[a][1])}}})}}};wax.template=function(a){var c={};function b(e){if(/^(https?:\/\/|data:image)/.test(e)){return e}}function d(e){return e}c.format=function(e,g){var h={};for(var f in g){h[f]=g[f]}if(e.format){h["__"+e.format+"__"]=true}return html_sanitize(Mustache.to_html(a,h),b,d)};return c};if(!wax){var wax={}}wax.tilejson=function(a,b){reqwest({url:a+(~a.indexOf("?")?"&":"?")+"callback=grid",type:"jsonp",jsonpCallback:"callback",success:b,error:b})};var wax=wax||{};wax.tooltip={};wax.tooltip=function(){var d=false,a=false,o={},h=[],k,c,n;if(document.body.style["-webkit-transition"]!==undefined){c="webkitTransitionEnd"}else{if(document.body.style.MozTransition!==undefined){c="transitionend"}}function j(p){var q=document.createElement("div");q.className="wax-tooltip wax-tooltip-0";q.innerHTML=p;return q}function e(){if(this.parentNode){this.parentNode.removeChild(this)}}function f(){var p;while(p=h.pop()){if(a&&c){bean.add(p,c,e);p.className+=" wax-fade"}else{if(p.parentNode){p.parentNode.removeChild(p)}}}}function g(t){var r;if(t.e.type==="mousemove"||!t.e.type){if(!d){r=t.content||t.formatter({format:"teaser"},t.data);if(!r||r==k){return}f();n.style.cursor="pointer";h.push(n.appendChild(j(r)));k=r}}else{r=t.content||t.formatter({format:"full"},t.data);if(!r){if(t.e.type&&t.e.type.match(/touch/)){r=t.content||t.formatter({format:"teaser"},t.data)}if(!r){return}}f();n.style.cursor="pointer";var p=n.appendChild(j(r));p.className+=" wax-popup";var s=p.appendChild(document.createElement("a"));s.href="#close";s.className="close";s.innerHTML="Close";d=true;h.push(p);bean.add(s,"touchstart mousedown",function(u){u.stop()});bean.add(s,"click touchend",function q(u){u.stop();f();d=false})}}function b(){n.style.cursor="default";k=null;if(!d){f()}}o.parent=function(p){if(!arguments.length){return n}n=p;return o};o.animate=function(p){if(!arguments.length){return a}a=p;return o};o.events=function(){return{on:g,off:b}};return o};var wax=wax||{};wax.u={offset:function(b){var a=b.offsetWidth||parseInt(b.style.width,10),j=b.offsetHeight||parseInt(b.style.height,10),h=document.body,g=0,c=0;var k=function(n){if(n===h||n===document.documentElement){return}g+=n.offsetTop;c+=n.offsetLeft;var e=n.style.transform||n.style.WebkitTransform||n.style.OTransform||n.style.MozTransform||n.style.msTransform;if(e){if(match=e.match(/translate\((.+)px, (.+)px\)/)){g+=parseInt(match[2],10);c+=parseInt(match[1],10)}else{if(match=e.match(/translate3d\((.+)px, (.+)px, (.+)px\)/)){g+=parseInt(match[2],10);c+=parseInt(match[1],10)}else{if(match=e.match(/matrix3d\(([\-\d,\s]+)\)/)){var o=match[1].split(",");g+=parseInt(o[13],10);c+=parseInt(o[12],10)}else{if(match=e.match(/matrix\(.+, .+, .+, .+, (.+), (.+)\)/)){g+=parseInt(match[2],10);c+=parseInt(match[1],10)}}}}}};k(b);try{while(b=b.offsetParent){k(b)}}catch(f){}g+=h.offsetTop;c+=h.offsetLeft;g+=h.parentNode.offsetTop;c+=h.parentNode.offsetLeft;var d=document.defaultView?window.getComputedStyle(h.parentNode,null):h.parentNode.currentStyle;if(h.parentNode.offsetTop!==parseInt(d.marginTop,10)&&!isNaN(parseInt(d.marginTop,10))){g+=parseInt(d.marginTop,10);c+=parseInt(d.marginLeft,10)}return{top:g,left:c,height:j,width:a}},"$":function(a){return(typeof a==="string")?document.getElementById(a):a},indexOf:function(e,d){var a=Array.prototype.indexOf;if(e===null){return -1}var c,b;if(a&&e.indexOf===a){return e.indexOf(d)}for(c=0,b=e.length;c<b;c++){if(e[c]===d){return c}}return -1},eventoffset:function(h){var b=0;var j=0;if(!h){h=window.event}if(h.pageX||h.pageY){return{x:h.pageX,y:h.pageY}}else{if(h.clientX||h.clientY){var g=document.documentElement,a=document.body;var d=document.body.parentNode.currentStyle;var c=parseInt(d.marginTop,10)||0;var f=parseInt(d.marginLeft,10)||0;return{x:h.clientX,y:h.clientY}}else{if(h.touches&&h.touches.length===1){return{x:h.touches[0].pageX,y:h.touches[0].pageY}}}}},limit:function(b,d,a){var c;return function(){var f=this,e=arguments;var g=function(){c=null;b.apply(f,e)};if(a){clearTimeout(c)}if(a||!c){c=setTimeout(g,d)}}},throttle:function(a,b){return this.limit(a,b,false)}};wax=wax||{};wax.g=wax.g||{};wax.g.attribution=function(d,e){e=e||{};var c,b={};b.element=function(){return c.element()};b.appendTo=function(a){wax.u.$(a).appendChild(c.element());return this};b.init=function(){c=wax.attribution();c.content(e.attribution);c.element().className="wax-attribution wax-g";return this};return b.init()};wax=wax||{};wax.g=wax.g||{};wax.g.bwdetect=function(d,b){b=b||{};var a=b.png||".png128",f=b.jpg||".jpg70";if(!d.mapTypes["mb-low"]){var e=d.mapTypes.mb;var g={tiles:[],scheme:e.options.scheme,blankImage:e.options.blankImage,minzoom:e.minZoom,maxzoom:e.maxZoom,name:e.name,description:e.description};for(var c=0;c<e.options.tiles.length;c++){g.tiles.push(e.options.tiles[c].replace(".png",a).replace(".jpg",f))}m.mapTypes.set("mb-low",new wax.g.connector(g))}return wax.bwdetect(b,function(h){d.setMapTypeId(h?"mb":"mb-low")})};wax=wax||{};wax.g=wax.g||{};wax.g.hash=function(b){return wax.hash({getCenterZoom:function(){var c=b.getCenter(),e=b.getZoom(),d=Math.max(0,Math.ceil(Math.log(e)/Math.LN2));return[e.toFixed(2),c.lat().toFixed(d),c.lng().toFixed(d)].join("/")},setCenterZoom:function a(c){b.setCenter(new google.maps.LatLng(c[1],c[2]));b.setZoom(c[0])},bindChange:function(c){google.maps.event.addListener(b,"idle",c)},unbindChange:function(c){google.maps.event.removeListener(b,"idle",c)}})};wax=wax||{};wax.g=wax.g||{};wax.g.interaction=function(){var e=false,c,g;function a(){e=true}function d(){if(!e&&c){return c}else{c=[];var n=g.getZoom();var k=wax.u.offset(g.getDiv());var h=function(q){if(!q.interactive){return}for(var p in q.cache){if(p.split("/")[0]!=n){continue}var o=wax.u.offset(q.cache[p]);c.push([o.top,o.left,q.cache[p]])}};for(var j in g.mapTypes){h(g.mapTypes[j])}g.overlayMapTypes.forEach(h)}return c}function b(h){if(!arguments.length){return g}g=h;google.maps.event.addListener(g,"tileloaded",a);google.maps.event.addListener(g,"idle",a)}function f(h){google.maps.event.removeListener(g,"tileloaded",a);google.maps.event.removeListener(g,"idle",a)}return wax.interaction().attach(b).detach(f).parent(function(){return g.getDiv()}).grid(d)};wax=wax||{};wax.g=wax.g||{};wax.g.legend=function(c,d){d=d||{};var a,b={};b.add=function(){a=wax.legend().content(d.legend||"");return this};b.element=function(){return a.element()};b.appendTo=function(e){wax.u.$(e).appendChild(a.element());return this};return b.add()};var wax=wax||{};wax.g=wax.g||{};wax.g.connector=function(a){a=a||{};this.options={tiles:a.tiles,scheme:a.scheme||"xyz",blankImage:a.blankImage||"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",opacity:a.opacity};this.minZoom=a.minzoom||0;this.maxZoom=a.maxzoom||22;this.name=a.name||"";this.description=a.description||"";this.interactive=true;this.tileSize=new google.maps.Size(256,256);this.cache={}};wax.g.connector.prototype.getTile=function(e,d,b){var c=d+"/"+e.x+"/"+e.y;if(!this.cache[c]){var a=this.cache[c]=new Image(256,256);this.cache[c].src=this.getTileUrl(e,d);this.cache[c].setAttribute("gTileKey",c);this.cache[c].setAttribute("style","opacity:"+this.options.opacity+"; filter: alpha(opacity="+(this.options.opacity*100)+")");this.cache[c].onerror=function(){a.style.display="none"}}return this.cache[c]};wax.g.connector.prototype.releaseTile=function(b){var a=b.getAttribute("gTileKey");if(this.cache[a]){delete this.cache[a]}if(b.parentNode){b.parentNode.removeChild(b)}};wax.g.connector.prototype.getTileUrl=function(e,c){var b=Math.pow(2,c),d=(this.options.scheme==="tms")?(b-1)-e.y:e.y,a=(e.x%b);a=(a<0)?(e.x%b)+b:a;if(d<0){return this.options.blankImage}return this.options.tiles[parseInt(a+d,10)%this.options.tiles.length].replace("{z}",c).replace("{x}",a).replace("{y}",d)}