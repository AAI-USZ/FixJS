function(uiConfig,$parse){uiConfig.codemirror=uiConfig.codemirror||{};return{require:"ngModel",link:function(scope,elm,attrs,ngModel){if(!elm.is("textarea")){throw Error("Element must be a textarea")}var codemirror;var uiCodemirrorGet=$parse(attrs.uiCodemirror);var onChangeHandler=function(ed){var newValue=ed.getValue();if(newValue!==ngModel.$viewValue){ngModel.$setViewValue(newValue);scope.$apply()}};var updateCodeMirror=function(options){options=angular.extend({},options,uiConfig.codemirror);var userOnChange=options.onChange;if(userOnChange){options.onChange=function(ed){onChangeHandler(ed);userOnChange(ed)}}else{options.onChange=onChangeHandler}if(codemirror){codemirror.toTextArea()}codemirror=CodeMirror.fromTextArea(elm[0],options)};updateCodeMirror(uiCodemirrorGet());scope.$watch(uiCodemirrorGet,updateCodeMirror,true);ngModel.$render=function(){codemirror.setValue(ngModel.$viewValue)}}}}]);angular.module("ui.directives").directive("uiCurrency",["ui.config","currencyFilter",function(uiConfig,currencyFilter){var options={pos:"ui-currency-pos",neg:"ui-currency-neg",zero:"ui-currency-zero"};if(uiConfig.currency){angular.extend(options,uiConfig.currency)}return{restrict:"EAC",require:"?ngModel",link:function(scope,element,attrs,controller){var opts,renderview,value;opts=angular.extend({},options,scope.$eval(attrs.uiCurrency));renderview=function(viewvalue){var num;num=viewvalue*1;if(num>0){element.addClass(opts.pos)}else{element.removeClass(opts.pos)}if(num<0){element.addClass(opts.neg)}else{element.removeClass(opts.neg)}if(num===0){element.addClass(opts.zero)}else{element.removeClass(opts.zero)}if(viewvalue===""){element.text("")}else{element.text(currencyFilter(num,opts.symbol))}return true};value="";if(controller!=null){controller.$render=function(){value=controller.$viewValue;element.val(value);renderview(value)}}else{if(attrs.num!=null){value=scope[attrs.num]}renderview(value)}}}}]);(function(){angular.module("ui.directives").directive("uiDate",[function(){return{require:"?ngModel",link:function($scope,element,attrs,controller){var originalRender,updateModel,usersOnSelectHandler,_ref;if((_ref=$scope.uiDate)==null){$scope.uiDate={}}if(controller!=null){updateModel=function(value,picker){return $scope.$apply(function(){return controller.$setViewValue(element.datepicker("getDate"))})};if($scope.uiDate.onSelect!=null){usersOnSelectHandler=$scope.uiDate.onSelect;$scope.uiDate.onSelect=function(value,picker){updateModel(value);return usersOnSelectHandler(value,picker)}}else{$scope.uiDate.onSelect=updateModel}originalRender=controller.$render;controller.$render=function(){originalRender();return element.datepicker("setDate",controller.$viewValue)}}return element.datepicker($scope.uiDate)}}}])}).call(this);angular.module("ui.directives").directive("uiEvent",[function(){return function(scope,elm,attrs){var events=scope.$eval(attrs.uiEvent);angular.forEach(events,function(event,key){elm.bind(key,function(){scope.$apply(event)})})}}]);angular.module("ui.directives").directive("uiJq",["ui.config",function(uiConfig){var options={};return{link:{post:function(scope,elm,attrs){var evalOptions;if(uiConfig["jq"]&&uiConfig["jq"][attrs.uiJq]){if(angular.isObject(options)&&angular.isObject(uiConfig["jq"][attrs.uiJq])){angular.extend(options,uiConfig["jq"][attrs.uiJq])}else{options=uiConfig["jq"][attrs.uiJq]}}if(attrs.uiOptions){evalOptions=scope.$eval("["+attrs.uiOptions+"]");if(angular.isObject(options)&&angular.isObject(evalOptions[0])){angular.extend(options,evalOptions[0])}else{options=evalOptions[0]}}elm[attrs.uiJq](options)}}}}]);angular.module("ui.directives").directive("uiKeypress",[function(){return{link:function(scope,elm,attrs){var keysByCode={8:"backspace",9:"tab",13:"enter",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete"};var params,paramsParsed,expression,keys,combinations=[];try{params=scope.$eval(attrs.uiKeypress);paramsParsed=true}catch(error){params=attrs.uiKeypress.split(/\s+and\s+/i);paramsParsed=false}angular.forEach(params,function(v,k){var combination={};if(paramsParsed){combination.expression=v;combination.keys=k}else{v=v.split(/\s+on\s+/i);combination.expression=v[0];combination.keys=v[1]}combination.keys=combination.keys.split("-");combinations.push(combination)});elm.bind("keydown",function(event){var altPressed=event.metaKey||event.altKey;var ctrlPressed=event.ctrlKey;var shiftPressed=event.shiftKey;angular.forEach(combinations,function(combination){var mainKeyPressed=combination.keys.indexOf(keysByCode[event.keyCode])>-1||combination.keys.indexOf(event.keyCode.toString())>-1;var altRequired=combination.keys.indexOf("alt")>-1;var ctrlRequired=combination.keys.indexOf("ctrl")>-1;var shiftRequired=combination.keys.indexOf("shift")>-1;if(mainKeyPressed&&altRequired==altPressed&&ctrlRequired==ctrlPressed&&shiftRequired==shiftPressed){scope.$eval(combination.expression)}})})}}}]);(function($){var pasteEventName=($.browser.msie?"paste":"input")+".mask";var iPhone=window.orientation!=undefined;$.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn"};$.fn.extend({caret:function(begin,end){if(this.length==0)return;if(typeof begin=="number"){end=typeof end=="number"?end:begin;return this.each(function(){if(this.setSelectionRange){this.setSelectionRange(begin,end)}else if(this.createTextRange){var range=this.createTextRange();range.collapse(true);range.moveEnd("character",end);range.moveStart("character",begin);range.select()}})}else{if(this[0].setSelectionRange){begin=this[0].selectionStart;end=this[0].selectionEnd}else if(document.selection&&document.selection.createRange){var range=document.selection.createRange();begin=0-range.duplicate().moveStart("character",-1e5);end=begin+range.text.length}return{begin:begin,end:end}}},unmask:function(){return this.trigger("unmask")},isMaskValid:function(){return $(this).data("mask-isvalid")},mask:function(mask,settings){if(!mask&&this.length>0){var input=$(this[0]);return input.data($.mask.dataName)()}settings=$.extend({placeholder:"_",completed:null},settings);var defs=$.mask.definitions;var tests=[];var partialPosition=mask.length;var firstNonMaskPos=null;var len=mask.length;$.each(mask.split(""),function(i,c){if(c=="?"){len--;partialPosition=i}else if(defs[c]){tests.push(new RegExp(defs[c]));if(firstNonMaskPos==null)firstNonMaskPos=tests.length-1}else{tests.push(null)}});return this.trigger("unmask").each(function(){var input=$(this);var buffer=$.map(mask.split(""),function(c,i){if(c!="?")return defs[c]?settings.placeholder:c});var focusText=input.val();function seekNext(pos){while(++pos<=len&&!tests[pos]);return pos}function seekPrev(pos){while(--pos>=0&&!tests[pos]);return pos}function shiftL(begin,end){if(begin<0)return;for(var i=begin,j=seekNext(end);i<len;i++){if(tests[i]){if(j<len&&tests[i].test(buffer[j])){buffer[i]=buffer[j];buffer[j]=settings.placeholder}else break;j=seekNext(j)}}writeBuffer();input.caret(Math.max(firstNonMaskPos,begin))}function shiftR(pos){for(var i=pos,c=settings.placeholder;i<len;i++){if(tests[i]){var j=seekNext(i);var t=buffer[i];buffer[i]=c;if(j<len&&tests[j].test(t))c=t;else break}}}function keydownEvent(e){var k=e.which;if(k==8||k==46||iPhone&&k==127){var pos=input.caret(),begin=pos.begin,end=pos.end;if(end-begin==0){begin=k!=46?seekPrev(begin):end=seekNext(begin-1);end=k==46?seekNext(end):end}clearBuffer(begin,end);shiftL(begin,end-1);isValid();return false}else if(k==27){input.val(focusText);input.caret(0,checkVal());return false}}function keypressEvent(e){var k=e.which,pos=input.caret();if(e.ctrlKey||e.altKey||e.metaKey||k<32){return true}else if(k){if(pos.end-pos.begin!=0){clearBuffer(pos.begin,pos.end);shiftL(pos.begin,pos.end-1);isValid()}var p=seekNext(pos.begin-1);if(p<len){var c=String.fromCharCode(k);if(tests[p].test(c)){shiftR(p);buffer[p]=c;writeBuffer();var next=seekNext(p);input.caret(next);isValid();if(settings.completed&&next>=len)settings.completed.call(input)}}return false}}function clearBuffer(start,end){for(var i=start;i<end&&i<len;i++){if(tests[i])buffer[i]=settings.placeholder}}function writeBuffer(){return input.val(buffer.join("")).val()}function isValid(){var test=input.val();var lastMatch=-1;for(var i=0,pos=0;i<len;i++){if(tests[i]){buffer[i]=settings.placeholder;while(pos++<test.length){var c=test.charAt(pos-1);if(tests[i].test(c)){buffer[i]=c;lastMatch=i;break}}if(pos>test.length)break}else if(buffer[i]==test.charAt(pos)&&i!=partialPosition){pos++;lastMatch=i}}var valid=lastMatch+1>=partialPosition;input.data("mask-isvalid",valid);return valid}function checkVal(allow){var test=input.val();var lastMatch=-1;for(var i=0,pos=0;i<len;i++){if(tests[i]){buffer[i]=settings.placeholder;while(pos++<test.length){var c=test.charAt(pos-1);if(tests[i].test(c)){buffer[i]=c;lastMatch=i;break}}if(pos>test.length)break}else if(buffer[i]==test.charAt(pos)&&i!=partialPosition){pos++;lastMatch=i}}if(!allow&&lastMatch+1<partialPosition){input.val("");clearBuffer(0,len)}else if(allow||lastMatch+1>=partialPosition){writeBuffer();if(!allow)input.val(input.val().substring(0,lastMatch+1))}return partialPosition?i:firstNonMaskPos}input.data($.mask.dataName,function(){return $.map(buffer,function(c,i){return tests[i]&&c!=settings.placeholder?c:null}).join("")});if(!input.attr("readonly"))input.one("unmask",function(){input.unbind(".mask").removeData($.mask.dataName)}).bind("focus.mask",function(){focusText=input.val();var pos=checkVal();writeBuffer();var moveCaret=function(){if(pos==mask.length)input.caret(0,pos);else input.caret(pos)};($.browser.msie?moveCaret:function(){setTimeout(moveCaret,0)})()}).bind("blur.mask",function(){checkVal();if(input.val()!=focusText)input.change()}).bind("keydown.mask",keydownEvent).bind("keypress.mask",keypressEvent).bind(pasteEventName,function(){setTimeout(function(){input.caret(checkVal(true))},0)});checkVal()})}})})(jQuery);(function(){angular.module("ui.directives").directive("uiMask",[function(){return{require:"ngModel",scope:{uiMask:"="},link:function($scope,element,attrs,controller){controller.$render=function(){var value;value=controller.$viewValue||"";element.val(value);return element.mask($scope.uiMask)};controller.$parsers.push(function(value){var isValid;isValid=element.data("mask-isvalid");controller.$setValidity("mask",isValid);return element.mask()});return element.bind("keyup",function(){return $scope.$apply(function(){return controller.$setViewValue(element.mask())})})}}}])}).call(this);angular.module("ui.directives").directive("uiModal",[function(){return{require:"ngModel",link:function(scope,elm,attrs,model){scope.$watch(attrs.ngModel,function(value){elm.modal(value&&"show"||"hide")});elm.on("show.ui",function(){model.$setViewValue(true);if(!scope.$$phase)scope.$apply()});elm.on("hide.ui",function(){model.$setViewValue(false);if(!scope.$$phase)scope.$apply()})}}}]);angular.module("ui.directives").directive("uiRemove",[function(){return{link:function(scope,elm,attrs){var parent=elm.parent();var expression=attrs.uiRemove;elm.data("ui-remove-index",elm.index());scope.$watch(expression,function(newValue,oldvalue){var index,children,child;if(newValue){elm.detach()}else if(!$.contains(parent,elm)){index=elm.data("ui-remove-index");children=elm.parent().children();if(children.length>0){for(var i=0;i<children.length;i++){child=children[i];if(index>child.index()&&i===children.length-1){child.after(elm)}else{child.before(elm)}}}else{parent.append(elm)}}})}}}]);angular.module("ui.directives").directive("uiReset",[function(){return function(scope,elm,attrs){elm.wrap('<span class="ui-resetwrap" />').after('<a class="ui-reset" />').next().click(function(e){e.preventDefault();elm.val(null).trigger("change")})}}]);angular.module("ui.directives").directive("uiScrollfix",[function(){return{link:{post:function(scope,elm,attrs){var top=elm.offset().top;if(!attrs.uiScrollfix){attrs.uiScrollfix=top}else{if(attrs.uiScrollfix.indexOf("-")===0){attrs.uiScrollfix=top-attrs.uiScrollfix.substr(1)}else if(attrs.uiScrollfix.indexOf("+")===0){attrs.uiScrollfix=top+parseInt(attrs.uiScrollfix.substr(1))}}$(window).bind("scroll.ui-scrollfix",function(){if(!elm.hasClass("ui-scrollfix")&&window.pageYOffset>attrs.uiScrollfix){elm.addClass("ui-scrollfix")}else if(elm.hasClass("ui-scrollfix")&&window.pageYOffset<attrs.uiScrollfix){elm.removeClass("ui-scrollfix")}})}}}}]);angular.module("ui.directives").directive("uiSelect2",["ui.config","$http",function(uiConfig,$http){var options={};if(uiConfig.select2){angular.extend(options,uiConfig.select2)}return{require:"?ngModel",link:function(scope,elm,attrs,controller){var init=true,opts,prevVal="",loaded=false,multiple=false;if(typeof attrs.multiple!=="undefined"){multiple=true}opts=angular.extend({},options,scope.$eval(attrs.uiSelect2));if(!elm.is("select")&&opts.ajax){if(multiple){opts.multiple=true}elm.bind("change",function(){controller.$setViewValue(elm.val());scope.$apply()})}function initialize(newVal){setTimeout(function(){if(newVal!==undefined){if(opts.ajax){if(newVal&&!$.isEmptyObject(newVal)){if(init&&opts.initial){var url=opts.initial(opts.ajax.url,newVal,opts.multiple);$http({method:"GET",url:url}).success(function(data,status,headers,config){data=opts.ajax.results(data);elm.select2("val",data.results||"")});init=false}}else{elm.select2("val","")}}else{elm.select2("val",newVal)}}},0)}setTimeout(function(){elm.select2(opts);loaded=true;initialize(prevVal)},0);scope.$watch(attrs.ngModel,function(newVal,oldVal,scope){if(newVal===prevVal){return}if(loaded){initialize(newVal);if(!newVal){elm.select2("val","")}}prevVal=newVal});if(angular.isString(opts.watch)){scope.$watch(opts.watch,function(newVal,oldVal,scope){if(loaded&&prevVal){setTimeout(function(){elm.select2("val",prevVal)},0)}})}}}}]);angular.module("ui.directives").directive("uiShow",[function(){return function(scope,elm,attrs){scope.$watch(attrs.uiShow,function(newVal,oldVal){if(newVal){elm.addClass("ui-show")}else{elm.removeClass("ui-show")}})}}]).directive("uiHide",[function(){return function(scope,elm,attrs){scope.$watch(attrs.uiHide,function(newVal,oldVal){if(newVal){elm.addClass("ui-hide")}else{elm.removeClass("ui-hide")}})}}]).directive("uiToggle",[function(){return function(scope,elm,attrs){scope.$watch(attrs.uiToggle,function(newVal,oldVal){if(newVal){elm.removeClass("ui-hide").addClass("ui-show")}else{elm.removeClass("ui-show").addClass("ui-hide")}})}}]);angular.module("ui.directives").directive("uiTemplate",[function(){return{restrict:"EAC",require:"?ngModel",link:function($scope,element,attrs,controller){var controllerOptions,options,value="";controllerOptions=$scope[attrs.options]||$scope.uiTemplateOptions||{};options={someattr:attrs.someattr||controllerOptions.someattr||"someDefaultValue"};var renderView=function(value){element.text(value)};if(controller!=null){controller.$render=function(){var modelValue=controller.$viewValue;element.val(modelValue!=null?modelValue:"");renderView(controller.$viewValue)}}else{renderView($scope[attrs.somemodel]||"")}}}}]);angular.module("ui.directives").directive("uiTinymce",["ui.config",function(uiConfig){uiConfig.tinymce=uiConfig.tinymce||{};return{require:"ngModel",link:{post:function(scope,elm,attrs,ngModel){var expression,options={onchange_callback:function(inst){if(inst.isDirty()){inst.save();ngModel.$setViewValue(elm.val());scope.$apply()}},handle_event_callback:function(e){if(this.isDirty()){this.save();ngModel.$setViewValue(elm.val());scope.$apply()}return true},setup:function(ed){ed.onSetContent.add(function(ed,o){if(ed.isDirty()){ed.save();ngModel.$setViewValue(elm.val());scope.$apply()}})}};if(attrs.uiTinymce){expression=scope.$eval(attrs.uiTinymce)}else{expression={}}angular.extend(options,uiConfig.tinymce,expression);elm.tinymce(options)}}}}]);angular.module("ui.filters").filter("highlight",function(){return function(text,filter){if(filter===undefined){return text}else{return text.replace(new RegExp(filter,"gi"),'<span class="ui-match">$&</span>')}}});angular.module("ui.filters").filter("length",function(){return function(value){return value.length}});angular.module("ui.filters").filter("prettify",function(){return function(value){return value.replace(/(?:_| |\b)(\w)/g,function(str,p1){return p1.toUpperCase()}).replace(/([a-z])([A-Z])/g,"$1 $2").replace(/\b([A-Z]+)([A-Z])([a-z])/,"$1 $2$3")}});angular.module("ui.filters").filter("unique",function(){return function(items,key){if(key&&angular.isArray(items)){var hashCheck={},newItems=[];angular.forEach(items,function(item,key){var value;if(angular.isString(key)){value=item[key]}else{value=item}if(hashCheck[value]===undefined){hashCheck[value]=true;newItems.push(item)}});items=newItems}return items}}