function(d,c,l,a){d.fn.caret=function(e,b){if("undefined"===typeof this[0]||this.is(":hidden")||"hidden"===this.css("visibility"))return this;var d,j,i,f,g,k;d=document.selection;var m=this[0],o=m.scrollTop;k=window.opera&&"[object Opera]"===window.opera.toString();var n="undefined"!==typeof m.selectionStart;"number"===typeof e&&"number"===typeof b&&(i=e,g=b);if("undefined"!==typeof i)return n?("TEXTAREA"===m.tagName&&k&&(k=this.val(),d=k.substring(0,i).split("\n")[c]-1,i+=0<d?d:0,g+=0<d?d:0),m.selectionStart= i,m.selectionEnd=g):(d=m.createTextRange(),d.collapse(!0),d.moveStart("character",i),d.moveEnd("character",g-i),d.select()),(this.is(":visible")||"hidden"!==this.css("visibility"))&&this.focus(),m.scrollTop=o,this;n?(j=m.selectionStart,f=m.selectionEnd,"TEXTAREA"===m.tagName&&k&&(k=this.val(),d=k.substring(0,j).split("\n")[c]-1,j+=0<d?-d:0,f+=0<d?-d:0)):"TEXTAREA"===m.tagName?(k=this.val(),i=d[l](),g=i[a](),g.moveToElementText(m),g.setEndPoint("EndToEnd",i),j=g.text.replace(/\r\n/g,"\r")[c],f=j+i.text.replace(/\r\n/g, "\r")[c]):(k=this.val().replace(/\r\n/g,"\r"),i=d[l]()[a](),i.moveEnd("character",k[c]),j=""===i.text?k[c]:k.lastIndexOf(i.text),i=d[l]()[a](),i.moveStart("character",-k[c]),f=i.text[c]);i=m.value.substring(j,f);return{start:j,end:f,text:i,replace:function(a){return m.value.substring(0,j)+a+m.value.substring(f,m.value[c])}}}}