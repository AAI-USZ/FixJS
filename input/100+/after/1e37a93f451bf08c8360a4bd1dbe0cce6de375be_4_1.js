function(k){this.route(k.path,k.callback);},this);return this._routes.concat();},_upgradeURL:function(k){if(!this._hasSameOrigin(k)){return k;}var m=(k.match(/#(.*)$/)||[])[1]||"",j=b.HistoryHash.hashPrefix,l;if(j&&m.indexOf(j)===0){m=m.replace(j,"");}m&&(l=this._getHashPath(m));if(l){return this._resolveURL(l);}return k;},_afterHistoryChange:function(l){var j=this,n=l.src,k=j._url,m=j._getURL();j._url=m;if(n==="popstate"&&(!j._ready||k.replace(/#.*$/,"")===m.replace(/#.*$/,""))){return;}j._dispatch(j._getPath(),m,n);},_defReadyFn:function(j){this._ready=true;}},{NAME:"router",ATTRS:{html5:{valueFn:function(){return b.Router.html5;},writeOnce:"initOnly"},root:{value:""},routes:{value:[],getter:"_getRoutes",setter:"_setRoutes"}},html5:b.HistoryBase.html5&&(!b.UA.android||b.UA.android>=3),_instances:a,dispatch:function(){var l,j,k;for(l=0,j=a.length;l<j;l+=1){k=a[l];if(k){k._dispatch(k._getPath(),k._getURL());}}