function(a,d,g,h){return function(a,c){var m=g._data(a),k=(m&&m.events||{})[c.type]||[],j=c.target,b,m=[],p,r,q,n=k.delegateCount||0,l,e;if(n&&!j.disabled)for(;j!=a;){l=[];for(q=0;q<n;q++)b=k[q],d.test(j,b.selector)&&l.push(b);l.length&&m.push({currentTarget:j,currentTargetHandlers:l});j=j.parentNode||a}m.push({currentTarget:a,currentTargetHandlers:k.slice(n)});var j=c.type,f,n=c._ks_groups;q=0;for(k=m.length;!c.isPropagationStopped&&q<k;++q){b=m[q];l=b.currentTargetHandlers;
b=b.currentTarget;c.currentTarget=b;for(b=0;!c.isImmediatePropagationStopped&&b<l.length;b++)if(e=l[b],!n||e.groups&&e.groups.match(n)){var o=e.data;c.type=e.originalType||j;(f=h[c.type])&&f.handle?(e=f.handle(c,e,o),0<e.length&&(p=e[0])):p=e.fn.call(e.scope||a,c,o);!1!==r&&(r=p);!1===p&&c.halt()}}return r}},{requires:["dom","./data","./special"]}