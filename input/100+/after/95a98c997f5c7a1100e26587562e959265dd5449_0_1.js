function(){function e(e,t,n){if(typeof t!="function"||typeof n!="number")throw"Incorrect argument format";this.context=e,this.callback=t,this.priority=n}return e.prototype={trigger:function(e){return this.callback.call(this.context,e)}},e}),define("SignalTree",["Subscription"],function(e){function t(e){Object.defineProperties(this,{_listeners:{value:e&&Object.prototype.toString.call(e)==="[object Array]"?e:[],writable:!0}})}function n(e,t){var n=e.length,r,i;while(n--){i=e[n],r=i.length;if(r>0)do if(i[--r].trigger(t)===!1)return!1;while(r)}return!0}function r(e,t){var n=e._listeners.slice(),r=t.priority,i=!1;for(var s=0,o=n.length;s<o;s++)if(n[s].priority>=r){n.splice(s,0,t),i=!0;break}i||n.push(t),e._listeners=n}function i(e,t){var n;switch(typeof t){case"function":n=function(e){return e.callback!==t};break;case"string":n=function(e){return e.callback.name!==t};break;case"object":n=function(e){return e!==t};break;default:n=function(){return!1}}e._listeners=e._listeners.filter(n)}function s(e,t){var n=0,r=t.length,i,o,u=[e._listeners];while(n<r)i=t[n++],o=i[0],o in e&&(u=u.concat(s(i.slice(1),e[o])));return u}function o(e,t){var n=[e._listeners],r=t.length,i=0;while(i<r){e=e[t[i++]];if(!e)break;n.push(e._listeners)}return n}return t.prototype={get:function(e,n){if(!e)return this;e=e.split(".");var r=this,i,s=e.length,o=0;if(s)do{i=e[o++];if(r[i]instanceof t)r=r[i];else{if(r[i])throw"namespace clash: "+i;if(!n)break;r=r[i]=new t}}while(o<s);return r},invoke:function(e){var t=this._listeners,n=t.length;if(n>0)do if(t[--n].trigger(e)===!1)return!1;while(n);return!0},publish:function(e,t){return typeof e=="string"?e=o(this,e.split(".")):(t=e,e=this._listeners),n(e,t)},on:function(t,n,i,s){switch(arguments.length){case 3:typeof i=="number"?(s=i,i=n,n=window):s=0;break;case 2:i=n,n=window,s=0;break;case 1:i=t,t="",n=window,s=0;break;case 0:throw"Insufficient arguments"}var o=new e(n,i,s);return t.split(" ").forEach(function(e){r(this.get(e,!0),o)},this),o},once:function(t,n,s,o){switch(arguments.length){case 3:typeof s=="number"?(o=s,s=n,n=window):o=0;break;case 2:s=n,n=window,o=0;break;case 1:s=t,t="",n=window,o=0;break;case 0:throw"Insufficient arguments"}var u=new e(n,s,o);return u._topics=[],u.trigger=function(e){return this._topics.forEach(function(e){i(e,this)}),this.callback.call(this.context,e)},t.split(" ").forEach(function(e){var t=this.get(e,!0);u._topics.push(t),r(t,u)},this),u},off:function(e,t){if(typeof e!="string"){if(!!t)throw"no topic specified";i(this,e)}e.split(" ").forEach(function(e){e=this.get(e,!1),e&&i(e,t)},this)}},t.methods=function(e){return Object.keys(t.prototype).forEach(function(n){e.hasOwnProperty(n)||Object.defineProperty(e,n,{value:t.prototype[n],writable:!0,configurable:!0})}),e},t.mixin=function(e){return t.call(e),t.methods(e),e},t.invokeList=n,t.insertListener=r,t.removeListener=i,t.collect=o,t.branchingCollect=s,Object.defineProperty(t.prototype,"constructor",{value:t}),new t}