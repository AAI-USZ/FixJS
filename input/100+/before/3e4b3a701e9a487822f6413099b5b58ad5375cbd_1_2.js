function(c,f,l,a){c.fn.caret=function(c,b){if("undefined"===typeof this[0]||this.is(":hidden")||"hidden"===this.css("visibility"))return this;var e,k,i,g,h,j;e=document.selection;var m=this[0],o=m.scrollTop;j=window.opera&&"[object Opera]"===window.opera.toString();var n="undefined"!==typeof m.selectionStart;"number"===typeof c&&"number"===typeof b&&(i=c,h=b);if("undefined"!==typeof i)return n?("TEXTAREA"===m.tagName&&j&&(j=this.val(),e=j.substring(0,i).split("\n")[f]-1,i+=0<e?e:0,h+=0<e?e:0),m.selectionStart= i,m.selectionEnd=h):(e=m.createTextRange(),e.collapse(!0),e.moveStart("character",i),e.moveEnd("character",h-i),e.select()),(this.is(":visible")||"hidden"!==this.css("visibility"))&&this.focus(),m.scrollTop=o,this;n?(k=m.selectionStart,g=m.selectionEnd,"TEXTAREA"===m.tagName&&j&&(j=this.val(),e=j.substring(0,k).split("\n")[f]-1,k+=0<e?-e:0,g+=0<e?-e:0)):"TEXTAREA"===m.tagName?(j=this.val(),i=e[l](),h=i[a](),h.moveToElementText(m),h.setEndPoint("EndToEnd",i),k=h.text.replace(/\r\n/g,"\r")[f],g=k+i.text.replace(/\r\n/g, "\r")[f]):(j=this.val().replace(/\r\n/g,"\r"),i=e[l]()[a](),i.moveEnd("character",j[f]),k=""===i.text?j[f]:j.lastIndexOf(i.text),i=e[l]()[a](),i.moveStart("character",-j[f]),g=i.text[f]);i=m.value.substring(k,g);return{start:k,end:g,text:i,replace:function(a){return m.value.substring(0,k)+a+m.value.substring(g,m.value[f])}}}}