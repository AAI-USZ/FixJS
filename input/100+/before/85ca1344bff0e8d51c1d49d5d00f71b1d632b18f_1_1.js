function(b,c,d){function f(k,q){pv.Mark.scene=k;h.index=q;if(k){var n=k.mark,o=n,m=[];do{m.push(o);i.push(k[q].data);o.index=q;o.scene=k;q=k.parentIndex;k=k.parent}while(o=o.parent);k=m.length-1;for(q=1;k>0;k--){o=m[k];o.scale=q;q*=o.scene[o.index].transform.k}if(n.children){k=0;for(m=n.children.length;k<m;k++){o=n.children[k];o.scene=n.scene[n.index].children[k];o.scale=q}}}}function g(k){if(k){k=k.mark;var q;if(k.children)for(var n=0,o=k.children.length;n<o;n++){q=k.children[n];delete q.scene;
delete q.scale}q=k;do{i.pop();if(q.parent){delete q.scene;delete q.scale}delete q.index}while(q=q.parent)}}var h=pv.Mark.prototype,i=pv.Mark.stack,j=pv.Mark.scene,l=h.index;g(j,l);f(b,c);try{d.apply(this,i)}finally{g(b,c);f(j,l)}}