function(img){var that=this;$('.ltl-box .image').html($(img).clone());$('.ltl-box .image img').load(function(){$('.ltl-box').css('marginTop',-$('.ltl-box img').height()/2).css('marginLeft',-$('.ltl-box img').width()/2);});this.current=img;if($(img).parent().prev().length){$('.ltl-scroller.left').css('display','block');}else{$('.ltl-scroller.left').css('display','none');}
if($(img).parent().next().length){$('.ltl-scroller.right').css('display','block');}else{$('.ltl-scroller.right').css('display','none');}
$(document).keydown(function(e){if(e.keyCode===27){that.hideLightbox();}
if(e.keyCode===37){that.scrollGallery('left');}
if(e.keyCode===39){that.scrollGallery('right');}});},scrollGallery:function(dir){var img=this.current;if(img){if(dir==='left'&&$(img).parent().prev().length){this.switchImage($(img).parent().prev().children()[0]);}else if(dir==='right'&&$(img).parent().next().length){this.switchImage($(img).parent().next().children()[0]);}}},showLightbox:function(){$('.ltl-modal-overlay').css('display','block');$('.ltl-box').css('display','block');},hideLightbox:function(){$('.ltl-modal-overlay').css('display','none');$('.ltl-box').css('display','none');},init:function(){var that=this;$('body').append($('<div class="ltl-modal-overlay"></div>').hide().click(function(){that.hideLightbox();})).append($($('<div class="ltl-box"></div>').append($('<div class="ltl-close-button"></div>').click(function(){that.hideLightbox();})).append($('<div class="ltl-scroller left"></div>').click(function(){that.scrollGallery('left');})).append($('<div class="ltl-scroller right"></div>').click(function(){that.scrollGallery('right');})).append($('<div class="image"></div>')).hide()));this.findImagesInLists().click(function(){that.switchImage(this);that.showLightbox();});}