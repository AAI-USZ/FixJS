function(a,d,g,h){return function(a,c){var l=g._data(a),k=(l&&l.events||{})[c.type]||[],j=c.target,b,l=[],p,r,q,n=k.delegateCount||0,m,f;if(n&&!j.disabled)for(;j!=a;){m=[];for(q=0;q<n;q++)b=k[q],d.test(j,b.selector)&&m.push(b);m.length&&l.push({currentTarget:j,currentTargetHandlers:m});j=j.parentNode||a}l.push({currentTarget:a,currentTargetHandlers:k.slice(n)});var j=c.type,e,n=c._ks_groups;q=0;for(k=l.length;!c.isPropagationStopped&&q<k;++q){b=l[q];m=b.currentTargetHandlers;
b=b.currentTarget;c.currentTarget=b;for(b=0;!c.isImmediatePropagationStopped&&b<m.length;b++)if(f=m[b],!n||f.groups&&f.groups.match(n)){var o=f.data;c.type=f.originalType||j;(e=h[c.type])&&e.handle?(f=e.handle(c,f,o),0<f.length&&(p=f[0])):p=f.fn.call(f.scope||a,c,o);!1!==r&&(r=p);!1===p&&c.halt()}}return r}},{requires:["dom","./data","./special"]}