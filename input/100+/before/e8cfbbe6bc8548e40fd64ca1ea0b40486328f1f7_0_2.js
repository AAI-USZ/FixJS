function(a){var c=this.targetList;var b=this.sourceList[a];vxl.go.console("vxlNotifier: firing "+a);$(document).trigger(a,[a,b,c])};vxlNotifier.prototype.getEvents=function(){var b=[];for(var a in this.sourceList){b.push(a)}return b};vxlNotifier.prototype.getTargetsFor=function(c){var a=this.targetList[c];var d=[];for(var b=0;b<a.length;b++){d.push(getObjectName(a[b]))}return d};(function(a,b){if(typeof exports==="object"){module.exports=b(global)}else{if(typeof define==="function"&&define.amd){define([],function(){return b(a)})}else{b(a)}}}(this,function(n){var m={};(function(){if(typeof(Float32Array)!="undefined"){var t=new Float32Array(1);var s=new Int32Array(t.buffer);m.invsqrt=function(x){var w=x*0.5;t[0]=x;var v=1.5;s[0]=1597463007-(s[0]>>1);var u=t[0];return u*(v-(w*u*u))}}else{m.invsqrt=function(u){return 1/Math.sqrt(u)}}})();var b=null;function r(s){b=s;return b
}function l(){b=(typeof Float32Array!=="undefined")?Float32Array:Array;return b}l();var c={};c.create=function(t){var s=new b(3);if(t){s[0]=t[0];s[1]=t[1];s[2]=t[2]}else{s[0]=s[1]=s[2]=0}return s};c.createFrom=function(s,v,u){var t=new b(3);t[0]=s;t[1]=v;t[2]=u;return t};c.set=function(t,s){s[0]=t[0];s[1]=t[1];s[2]=t[2];return s};c.add=function(t,u,s){if(!s||t===s){t[0]+=u[0];t[1]+=u[1];t[2]+=u[2];return t}s[0]=t[0]+u[0];s[1]=t[1]+u[1];s[2]=t[2]+u[2];return s};c.subtract=function(t,u,s){if(!s||t===s){t[0]-=u[0];
t[1]-=u[1];t[2]-=u[2];return t}s[0]=t[0]-u[0];s[1]=t[1]-u[1];s[2]=t[2]-u[2];return s};c.multiply=function(t,u,s){if(!s||t===s){t[0]*=u[0];t[1]*=u[1];t[2]*=u[2];return t}s[0]=t[0]*u[0];s[1]=t[1]*u[1];s[2]=t[2]*u[2];return s};c.negate=function(t,s){if(!s){s=t}s[0]=-t[0];s[1]=-t[1];s[2]=-t[2];return s};c.scale=function(t,u,s){if(!s||t===s){t[0]*=u;t[1]*=u;t[2]*=u;return t}s[0]=t[0]*u;s[1]=t[1]*u;s[2]=t[2]*u;return s};c.normalize=function(v,u){if(!u){u=v}var t=v[0],A=v[1],w=v[2],s=Math.sqrt(t*t+A*A+w*w);
if(!s){u[0]=0;u[1]=0;u[2]=0;return u}else{if(s===1){u[0]=t;u[1]=A;u[2]=w;return u}}s=1/s;u[0]=t*s;u[1]=A*s;u[2]=w*s;return u};c.cross=function(t,v,D){if(!D){D=t}var C=t[0],A=t[1],w=t[2],s=v[0],B=v[1],u=v[2];D[0]=A*u-w*B;D[1]=w*s-C*u;D[2]=C*B-A*s;return D};c.length=function(t){var s=t[0],v=t[1],u=t[2];return Math.sqrt(s*s+v*v+u*u)};c.dot=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]};c.direction=function(v,w,u){if(!u){u=v}var t=v[0]-w[0],B=v[1]-w[1],A=v[2]-w[2],s=Math.sqrt(t*t+B*B+A*A);if(!s){u[0]=0;
u[1]=0;u[2]=0;return u}s=1/s;u[0]=t*s;u[1]=B*s;u[2]=A*s;return u};c.lerp=function(u,v,t,s){if(!s){s=u}s[0]=u[0]+t*(v[0]-u[0]);s[1]=u[1]+t*(v[1]-u[1]);s[2]=u[2]+t*(v[2]-u[2]);return s};c.dist=function(t,u){var s=u[0]-t[0],w=u[1]-t[1],v=u[2]-t[2];return Math.sqrt(s*s+w*w+v*v)};var o=null;var k=new b(4);c.unproject=function(y,u,z,t,x){if(!x){x=y}if(!o){o=g.create()}var s=o;var w=k;w[0]=(y[0]-t[0])*2/t[2]-1;w[1]=(y[1]-t[1])*2/t[3]-1;w[2]=2*y[2]-1;w[3]=1;g.multiply(z,u,s);if(!g.inverse(s)){return null
}g.multiplyVec4(s,w);if(w[3]===0){return null}x[0]=w[0]/w[3];x[1]=w[1]/w[3];x[2]=w[2]/w[3];return x};var q=c.createFrom(1,0,0);var p=c.createFrom(0,1,0);var f=c.createFrom(0,0,1);c.rotationTo=function(u,t,w){if(!w){w=e.create()}var z=c.dot(u,t);var y=c.create();if(z>=1){e.set(j,w)}else{if(z<(0.000001-1)){c.cross(q,u,y);if(y.length<0.000001){c.cross(p,u,y)}if(y.length<0.000001){c.cross(f,u,y)}c.normalize(y);e.fromAxisAngle(y,Math.PI,w)}else{var x=Math.sqrt((1+z)*2);var v=1/x;c.cross(u,t,y);w[0]=y[0]*v;
w[1]=y[1]*v;w[2]=y[2]*v;w[3]=x*0.5;e.normalize(w)}}if(w[3]>1){w[3]=1}else{if(w[3]<-1){w[3]=-1}}return w};c.str=function(s){return"["+s[0]+", "+s[1]+", "+s[2]+"]"};var h={};h.create=function(t){var s=new b(9);if(t){s[0]=t[0];s[1]=t[1];s[2]=t[2];s[3]=t[3];s[4]=t[4];s[5]=t[5];s[6]=t[6];s[7]=t[7];s[8]=t[8]}else{s[0]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=0}return s};h.createFrom=function(B,A,z,x,w,v,u,t,s){var y=new b(9);y[0]=B;y[1]=A;y[2]=z;y[3]=x;y[4]=w;y[5]=v;y[6]=u;y[7]=t;y[8]=s;return y};h.determinant=function(z){var u=z[0],t=z[1],s=z[2],B=z[3],A=z[4],y=z[5],x=z[6],w=z[7],v=z[8];
return u*(v*A-y*w)+t*(-v*B+y*x)+s*(w*B-A*x)};h.inverse=function(F,D){var w=F[0],v=F[1],u=F[2],H=F[3],G=F[4],E=F[5],A=F[6],z=F[7],y=F[8],x=y*G-E*z,t=-y*H+E*A,C=z*H-G*A,B=w*x+v*t+u*C,s;if(!B){return null}s=1/B;if(!D){D=h.create()}D[0]=x*s;D[1]=(-y*v+u*z)*s;D[2]=(E*v-u*G)*s;D[3]=t*s;D[4]=(y*w-u*A)*s;D[5]=(-E*w+u*H)*s;D[6]=C*s;D[7]=(-z*w+v*A)*s;D[8]=(G*w-v*H)*s;return D};h.multiply=function(H,y,z){if(!z){z=H}var M=H[0],L=H[1],K=H[2],x=H[3],w=H[4],v=H[5],F=H[6],E=H[7],D=H[8],C=y[0],B=y[1],A=y[2],J=y[3],I=y[4],G=y[5],u=y[6],t=y[7],s=y[8];
z[0]=C*M+B*x+A*F;z[1]=C*L+B*w+A*E;z[2]=C*K+B*v+A*D;z[3]=J*M+I*x+G*F;z[4]=J*L+I*w+G*E;z[5]=J*K+I*v+G*D;z[6]=u*M+t*x+s*F;z[7]=u*L+t*w+s*E;z[8]=u*K+t*v+s*D;return z};h.multiplyVec2=function(t,v,u){if(!u){u=v}var s=v[0],w=v[1];u[0]=s*t[0]+w*t[3]+t[6];u[1]=s*t[1]+w*t[4]+t[7];return u};h.multiplyVec3=function(t,v,u){if(!u){u=v}var s=v[0],A=v[1],w=v[2];u[0]=s*t[0]+A*t[3]+w*t[6];u[1]=s*t[1]+A*t[4]+w*t[7];u[2]=s*t[2]+A*t[5]+w*t[8];return u};h.set=function(t,s){s[0]=t[0];s[1]=t[1];s[2]=t[2];s[3]=t[3];s[4]=t[4];
s[5]=t[5];s[6]=t[6];s[7]=t[7];s[8]=t[8];return s};h.identity=function(s){if(!s){s=h.create()}s[0]=1;s[1]=0;s[2]=0;s[3]=0;s[4]=1;s[5]=0;s[6]=0;s[7]=0;s[8]=1;return s};h.transpose=function(u,t){if(!t||u===t){var w=u[1],v=u[2],s=u[5];u[1]=u[3];u[2]=u[6];u[3]=w;u[5]=u[7];u[6]=v;u[7]=s;return u}t[0]=u[0];t[1]=u[3];t[2]=u[6];t[3]=u[1];t[4]=u[4];t[5]=u[7];t[6]=u[2];t[7]=u[5];t[8]=u[8];return t};h.toMat4=function(t,s){if(!s){s=g.create()}s[15]=1;s[14]=0;s[13]=0;s[12]=0;s[11]=0;s[10]=t[8];s[9]=t[7];s[8]=t[6];
s[7]=0;s[6]=t[5];s[5]=t[4];s[4]=t[3];s[3]=0;s[2]=t[2];s[1]=t[1];s[0]=t[0];return s};h.str=function(s){return"["+s[0]+", "+s[1]+", "+s[2]+", "+s[3]+", "+s[4]+", "+s[5]+", "+s[6]+", "+s[7]+", "+s[8]+"]"};var g={};g.create=function(t){var s=new b(16);if(arguments.length===4){s[0]=arguments[0];s[1]=arguments[1];s[2]=arguments[2];s[3]=arguments[3];s[4]=arguments[4];s[5]=arguments[5];s[6]=arguments[6];s[7]=arguments[7];s[8]=arguments[8];s[9]=arguments[9];s[10]=arguments[10];s[11]=arguments[11];s[12]=arguments[12];
s[13]=arguments[13];s[14]=arguments[14];s[15]=arguments[15]}else{if(t){s[0]=t[0];s[1]=t[1];s[2]=t[2];s[3]=t[3];s[4]=t[4];s[5]=t[5];s[6]=t[6];s[7]=t[7];s[8]=t[8];s[9]=t[9];s[10]=t[10];s[11]=t[11];s[12]=t[12];s[13]=t[13];s[14]=t[14];s[15]=t[15]}}return s};g.createFrom=function(I,H,F,C,z,y,x,w,v,u,t,s,G,E,B,A){var D=new b(16);D[0]=I;D[1]=H;D[2]=F;D[3]=C;D[4]=z;D[5]=y;D[6]=x;D[7]=w;D[8]=v;D[9]=u;D[10]=t;D[11]=s;D[12]=G;D[13]=E;D[14]=B;D[15]=A;return D};g.set=function(t,s){s[0]=t[0];s[1]=t[1];s[2]=t[2];
s[3]=t[3];s[4]=t[4];s[5]=t[5];s[6]=t[6];s[7]=t[7];s[8]=t[8];s[9]=t[9];s[10]=t[10];s[11]=t[11];s[12]=t[12];s[13]=t[13];s[14]=t[14];s[15]=t[15];return s};g.identity=function(s){if(!s){s=g.create()}s[0]=1;s[1]=0;s[2]=0;s[3]=0;s[4]=0;s[5]=1;s[6]=0;s[7]=0;s[8]=0;s[9]=0;s[10]=1;s[11]=0;s[12]=0;s[13]=0;s[14]=0;s[15]=1;return s};g.transpose=function(v,u){if(!u||v===u){var z=v[1],x=v[2],w=v[3],s=v[6],y=v[7],t=v[11];v[1]=v[4];v[2]=v[8];v[3]=v[12];v[4]=z;v[6]=v[9];v[7]=v[13];v[8]=x;v[9]=s;v[11]=v[14];v[12]=w;
v[13]=y;v[14]=t;return v}u[0]=v[0];u[1]=v[4];u[2]=v[8];u[3]=v[12];u[4]=v[1];u[5]=v[5];u[6]=v[9];u[7]=v[13];u[8]=v[2];u[9]=v[6];u[10]=v[10];u[11]=v[14];u[12]=v[3];u[13]=v[7];u[14]=v[11];u[15]=v[15];return u};g.determinant=function(G){var z=G[0],y=G[1],w=G[2],u=G[3],I=G[4],H=G[5],F=G[6],E=G[7],D=G[8],C=G[9],B=G[10],A=G[11],x=G[12],v=G[13],t=G[14],s=G[15];return(x*C*F*u-D*v*F*u-x*H*B*u+I*v*B*u+D*H*t*u-I*C*t*u-x*C*w*E+D*v*w*E+x*y*B*E-z*v*B*E-D*y*t*E+z*C*t*E+x*H*w*A-I*v*w*A-x*y*F*A+z*v*F*A+I*y*t*A-z*H*t*A-D*H*w*s+I*C*w*s+D*y*F*s-z*C*F*s-I*y*B*s+z*H*B*s)
};g.inverse=function(N,C){if(!C){C=N}var V=N[0],T=N[1],S=N[2],Q=N[3],v=N[4],u=N[5],t=N[6],s=N[7],K=N[8],J=N[9],I=N[10],H=N[11],X=N[12],W=N[13],U=N[14],R=N[15],G=V*u-T*v,F=V*t-S*v,E=V*s-Q*v,D=T*t-S*u,B=T*s-Q*u,A=S*s-Q*t,z=K*W-J*X,y=K*U-I*X,x=K*R-H*X,w=J*U-I*W,P=J*R-H*W,M=I*R-H*U,O=(G*M-F*P+E*w+D*x-B*y+A*z),L;if(!O){return null}L=1/O;C[0]=(u*M-t*P+s*w)*L;C[1]=(-T*M+S*P-Q*w)*L;C[2]=(W*A-U*B+R*D)*L;C[3]=(-J*A+I*B-H*D)*L;C[4]=(-v*M+t*x-s*y)*L;C[5]=(V*M-S*x+Q*y)*L;C[6]=(-X*A+U*E-R*F)*L;C[7]=(K*A-I*E+H*F)*L;
C[8]=(v*P-u*x+s*z)*L;C[9]=(-V*P+T*x-Q*z)*L;C[10]=(X*B-W*E+R*G)*L;C[11]=(-K*B+J*E-H*G)*L;C[12]=(-v*w+u*y-t*z)*L;C[13]=(V*w-T*y+S*z)*L;C[14]=(-X*D+W*F-U*G)*L;C[15]=(K*D-J*F+I*G)*L;return C};g.toRotationMat=function(t,s){if(!s){s=g.create()}s[0]=t[0];s[1]=t[1];s[2]=t[2];s[3]=t[3];s[4]=t[4];s[5]=t[5];s[6]=t[6];s[7]=t[7];s[8]=t[8];s[9]=t[9];s[10]=t[10];s[11]=t[11];s[12]=0;s[13]=0;s[14]=0;s[15]=1;return s};g.toMat3=function(t,s){if(!s){s=h.create()}s[0]=t[0];s[1]=t[1];s[2]=t[2];s[3]=t[4];s[4]=t[5];s[5]=t[6];
s[6]=t[8];s[7]=t[9];s[8]=t[10];return s};g.toInverseMat3=function(F,D){var w=F[0],v=F[1],u=F[2],H=F[4],G=F[5],E=F[6],A=F[8],z=F[9],y=F[10],x=y*G-E*z,t=-y*H+E*A,C=z*H-G*A,B=w*x+v*t+u*C,s;if(!B){return null}s=1/B;if(!D){D=h.create()}D[0]=x*s;D[1]=(-y*v+u*z)*s;D[2]=(E*v-u*G)*s;D[3]=t*s;D[4]=(y*w-u*A)*s;D[5]=(-E*w+u*H)*s;D[6]=C*s;D[7]=(-z*w+v*A)*s;D[8]=(G*w-v*H)*s;return D};g.multiply=function(R,A,B){if(!B){B=R}var Y=R[0],X=R[1],V=R[2],T=R[3],z=R[4],y=R[5],x=R[6],w=R[7],N=R[8],M=R[9],L=R[10],K=R[11],aa=R[12],Z=R[13],W=R[14],U=R[15],I=A[0],G=A[1],E=A[2],C=A[3],S=A[4],Q=A[5],P=A[6],O=A[7],v=A[8],u=A[9],t=A[10],s=A[11],J=A[12],H=A[13],F=A[14],D=A[15];
B[0]=I*Y+G*z+E*N+C*aa;B[1]=I*X+G*y+E*M+C*Z;B[2]=I*V+G*x+E*L+C*W;B[3]=I*T+G*w+E*K+C*U;B[4]=S*Y+Q*z+P*N+O*aa;B[5]=S*X+Q*y+P*M+O*Z;B[6]=S*V+Q*x+P*L+O*W;B[7]=S*T+Q*w+P*K+O*U;B[8]=v*Y+u*z+t*N+s*aa;B[9]=v*X+u*y+t*M+s*Z;B[10]=v*V+u*x+t*L+s*W;B[11]=v*T+u*w+t*K+s*U;B[12]=J*Y+H*z+F*N+D*aa;B[13]=J*X+H*y+F*M+D*Z;B[14]=J*V+H*x+F*L+D*W;B[15]=J*T+H*w+F*K+D*U;return B};g.multiplyVec3=function(v,u,t){if(!t){t=u}var s=u[0],A=u[1],w=u[2];t[0]=v[0]*s+v[4]*A+v[8]*w+v[12];t[1]=v[1]*s+v[5]*A+v[9]*w+v[13];t[2]=v[2]*s+v[6]*A+v[10]*w+v[14];
return t};g.multiplyVec4=function(A,v,u){if(!u){u=v}var s=v[0],C=v[1],B=v[2],t=v[3];u[0]=A[0]*s+A[4]*C+A[8]*B+A[12]*t;u[1]=A[1]*s+A[5]*C+A[9]*B+A[13]*t;u[2]=A[2]*s+A[6]*C+A[10]*B+A[14]*t;u[3]=A[3]*s+A[7]*C+A[11]*B+A[15]*t;return u};g.translate=function(I,D,B){var C=D[0],A=D[1],w=D[2],M,L,K,J,v,u,t,s,H,G,F,E;if(!B||I===B){I[12]=I[0]*C+I[4]*A+I[8]*w+I[12];I[13]=I[1]*C+I[5]*A+I[9]*w+I[13];I[14]=I[2]*C+I[6]*A+I[10]*w+I[14];I[15]=I[3]*C+I[7]*A+I[11]*w+I[15];return I}M=I[0];L=I[1];K=I[2];J=I[3];v=I[4];
u=I[5];t=I[6];s=I[7];H=I[8];G=I[9];F=I[10];E=I[11];B[0]=M;B[1]=L;B[2]=K;B[3]=J;B[4]=v;B[5]=u;B[6]=t;B[7]=s;B[8]=H;B[9]=G;B[10]=F;B[11]=E;B[12]=M*C+v*A+H*w+I[12];B[13]=L*C+u*A+G*w+I[13];B[14]=K*C+t*A+F*w+I[14];B[15]=J*C+s*A+E*w+I[15];return B};g.scale=function(v,u,t){var s=u[0],A=u[1],w=u[2];if(!t||v===t){v[0]*=s;v[1]*=s;v[2]*=s;v[3]*=s;v[4]*=A;v[5]*=A;v[6]*=A;v[7]*=A;v[8]*=w;v[9]*=w;v[10]*=w;v[11]*=w;return v}t[0]=v[0]*s;t[1]=v[1]*s;t[2]=v[2]*s;t[3]=v[3]*s;t[4]=v[4]*A;t[5]=v[5]*A;t[6]=v[6]*A;t[7]=v[7]*A;
t[8]=v[8]*w;t[9]=v[9]*w;t[10]=v[10]*w;t[11]=v[11]*w;t[12]=v[12];t[13]=v[13];t[14]=v[14];t[15]=v[15];return t};g.rotate=function(W,U,u,H){var I=u[0],G=u[1],F=u[2],S=Math.sqrt(I*I+G*G+F*F),N,Y,M,ac,ab,aa,Z,E,D,C,B,R,Q,P,O,L,K,J,X,V,T,A,w,v;if(!S){return null}if(S!==1){S=1/S;I*=S;G*=S;F*=S}N=Math.sin(U);Y=Math.cos(U);M=1-Y;ac=W[0];ab=W[1];aa=W[2];Z=W[3];E=W[4];D=W[5];C=W[6];B=W[7];R=W[8];Q=W[9];P=W[10];O=W[11];L=I*I*M+Y;K=G*I*M+F*N;J=F*I*M-G*N;X=I*G*M-F*N;V=G*G*M+Y;T=F*G*M+I*N;A=I*F*M+G*N;w=G*F*M-I*N;
v=F*F*M+Y;if(!H){H=W}else{if(W!==H){H[12]=W[12];H[13]=W[13];H[14]=W[14];H[15]=W[15]}}H[0]=ac*L+E*K+R*J;H[1]=ab*L+D*K+Q*J;H[2]=aa*L+C*K+P*J;H[3]=Z*L+B*K+O*J;H[4]=ac*X+E*V+R*T;H[5]=ab*X+D*V+Q*T;H[6]=aa*X+C*V+P*T;H[7]=Z*X+B*V+O*T;H[8]=ac*A+E*w+R*v;H[9]=ab*A+D*w+Q*v;H[10]=aa*A+C*w+P*v;H[11]=Z*A+B*w+O*v;return H};g.rotateX=function(C,t,A){var F=Math.sin(t),y=Math.cos(t),E=C[4],D=C[5],B=C[6],z=C[7],x=C[8],w=C[9],v=C[10],u=C[11];if(!A){A=C}else{if(C!==A){A[0]=C[0];A[1]=C[1];A[2]=C[2];A[3]=C[3];A[12]=C[12];
A[13]=C[13];A[14]=C[14];A[15]=C[15]}}A[4]=E*y+x*F;A[5]=D*y+w*F;A[6]=B*y+v*F;A[7]=z*y+u*F;A[8]=E*-F+x*y;A[9]=D*-F+w*y;A[10]=B*-F+v*y;A[11]=z*-F+u*y;return A};g.rotateY=function(E,w,D){var F=Math.sin(w),C=Math.cos(w),x=E[0],v=E[1],u=E[2],t=E[3],B=E[8],A=E[9],z=E[10],y=E[11];if(!D){D=E}else{if(E!==D){D[4]=E[4];D[5]=E[5];D[6]=E[6];D[7]=E[7];D[12]=E[12];D[13]=E[13];D[14]=E[14];D[15]=E[15]}}D[0]=x*C+B*-F;D[1]=v*C+A*-F;D[2]=u*C+z*-F;D[3]=t*C+y*-F;D[8]=x*F+B*C;D[9]=v*F+A*C;D[10]=u*F+z*C;D[11]=t*F+y*C;return D
};g.rotateZ=function(D,w,A){var F=Math.sin(w),y=Math.cos(w),x=D[0],v=D[1],u=D[2],t=D[3],E=D[4],C=D[5],B=D[6],z=D[7];if(!A){A=D}else{if(D!==A){A[8]=D[8];A[9]=D[9];A[10]=D[10];A[11]=D[11];A[12]=D[12];A[13]=D[13];A[14]=D[14];A[15]=D[15]}}A[0]=x*y+E*F;A[1]=v*y+C*F;A[2]=u*y+B*F;A[3]=t*y+z*F;A[4]=x*-F+E*y;A[5]=v*-F+C*y;A[6]=u*-F+B*y;A[7]=t*-F+z*y;return A};g.frustum=function(t,B,s,z,w,v,A){if(!A){A=g.create()}var x=(B-t),u=(z-s),y=(v-w);A[0]=(w*2)/x;A[1]=0;A[2]=0;A[3]=0;A[4]=0;A[5]=(w*2)/u;A[6]=0;A[7]=0;
A[8]=(B+t)/x;A[9]=(z+s)/u;A[10]=-(v+w)/y;A[11]=-1;A[12]=0;A[13]=0;A[14]=-(v*w*2)/y;A[15]=0;return A};g.perspective=function(u,t,x,s,v){var y=x*Math.tan(u*Math.PI/360),w=y*t;return g.frustum(-w,w,-y,y,x,s,v)};g.ortho=function(t,B,s,z,w,v,A){if(!A){A=g.create()}var x=(B-t),u=(z-s),y=(v-w);A[0]=2/x;A[1]=0;A[2]=0;A[3]=0;A[4]=0;A[5]=2/u;A[6]=0;A[7]=0;A[8]=0;A[9]=0;A[10]=-2/y;A[11]=0;A[12]=-(t+B)/x;A[13]=-(z+s)/u;A[14]=-(v+w)/y;A[15]=1;return A};g.lookAt=function(N,O,z,y){if(!y){y=g.create()}var M,L,J,u,t,s,C,B,A,H,K=N[0],I=N[1],G=N[2],x=z[0],w=z[1],v=z[2],F=O[0],E=O[1],D=O[2];
if(K===F&&I===E&&G===D){return g.identity(y)}C=K-F;B=I-E;A=G-D;H=1/Math.sqrt(C*C+B*B+A*A);C*=H;B*=H;A*=H;M=w*A-v*B;L=v*C-x*A;J=x*B-w*C;H=Math.sqrt(M*M+L*L+J*J);if(!H){M=0;L=0;J=0}else{H=1/H;M*=H;L*=H;J*=H}u=B*J-A*L;t=A*M-C*J;s=C*L-B*M;H=Math.sqrt(u*u+t*t+s*s);if(!H){u=0;t=0;s=0}else{H=1/H;u*=H;t*=H;s*=H}y[0]=M;y[1]=u;y[2]=C;y[3]=0;y[4]=L;y[5]=t;y[6]=B;y[7]=0;y[8]=J;y[9]=s;y[10]=A;y[11]=0;y[12]=-(M*K+L*I+J*G);y[13]=-(u*K+t*I+s*G);y[14]=-(C*K+B*I+A*G);y[15]=1;return y};g.fromRotationTranslation=function(s,H,D){if(!D){D=g.create()
}var E=s[0],C=s[1],B=s[2],F=s[3],K=E+E,t=C+C,G=B+B,A=E*K,v=E*t,u=E*G,J=C*t,I=C*G,N=B*G,O=F*K,M=F*t,L=F*G;D[0]=1-(J+N);D[1]=v+L;D[2]=u-M;D[3]=0;D[4]=v-L;D[5]=1-(A+N);D[6]=I+O;D[7]=0;D[8]=u+M;D[9]=I-O;D[10]=1-(A+J);D[11]=0;D[12]=H[0];D[13]=H[1];D[14]=H[2];D[15]=1;return D};g.str=function(s){return"["+s[0]+", "+s[1]+", "+s[2]+", "+s[3]+", "+s[4]+", "+s[5]+", "+s[6]+", "+s[7]+", "+s[8]+", "+s[9]+", "+s[10]+", "+s[11]+", "+s[12]+", "+s[13]+", "+s[14]+", "+s[15]+"]"};var e={};e.create=function(t){var s=new b(4);
if(t){s[0]=t[0];s[1]=t[1];s[2]=t[2];s[3]=t[3]}else{s[0]=s[1]=s[2]=s[3]=0}return s};e.createFrom=function(s,A,v,t){var u=new b(4);u[0]=s;u[1]=A;u[2]=v;u[3]=t;return u};e.set=function(t,s){s[0]=t[0];s[1]=t[1];s[2]=t[2];s[3]=t[3];return s};e.identity=function(s){if(!s){s=e.create()}s[0]=0;s[1]=0;s[2]=0;s[3]=1;return s};var j=e.identity();e.calculateW=function(u,t){var s=u[0],w=u[1],v=u[2];if(!t||u===t){u[3]=-Math.sqrt(Math.abs(1-s*s-w*w-v*v));return u}t[0]=s;t[1]=w;t[2]=v;t[3]=-Math.sqrt(Math.abs(1-s*s-w*w-v*v));
return t};e.dot=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]+s[3]*t[3]};e.inverse=function(x,w){var t=x[0],s=x[1],z=x[2],y=x[3],u=t*t+s*s+z*z+y*y,v=u?1/u:0;if(!w||x===w){x[0]*=-v;x[1]*=-v;x[2]*=-v;x[3]*=v;return x}w[0]=-x[0]*v;w[1]=-x[1]*v;w[2]=-x[2]*v;w[3]=x[3]*v;return w};e.conjugate=function(t,s){if(!s||t===s){t[0]*=-1;t[1]*=-1;t[2]*=-1;return t}s[0]=-t[0];s[1]=-t[1];s[2]=-t[2];s[3]=t[3];return s};e.length=function(u){var s=u[0],A=u[1],v=u[2],t=u[3];return Math.sqrt(s*s+A*A+v*v+t*t)};e.normalize=function(A,v){if(!v){v=A
}var t=A[0],C=A[1],B=A[2],u=A[3],s=Math.sqrt(t*t+C*C+B*B+u*u);if(s===0){v[0]=0;v[1]=0;v[2]=0;v[3]=0;return v}s=1/s;v[0]=t*s;v[1]=C*s;v[2]=B*s;v[3]=u*s;return v};e.add=function(t,u,s){if(!s||t===s){t[0]+=u[0];t[1]+=u[1];t[2]+=u[2];t[3]+=u[3];return t}s[0]=t[0]+u[0];s[1]=t[1]+u[1];s[2]=t[2]+u[2];s[3]=t[3]+u[3];return s};e.multiply=function(t,v,C){if(!C){C=t}var A=t[0],z=t[1],y=t[2],B=t[3],w=v[0],u=v[1],s=v[2],x=v[3];C[0]=A*x+B*w+z*s-y*u;C[1]=z*x+B*u+y*w-A*s;C[2]=y*x+B*s+A*u-z*w;C[3]=B*x-A*w-z*u-y*s;
return C};e.multiplyVec3=function(t,v,I){if(!I){I=v}var H=v[0],G=v[1],F=v[2],D=t[0],C=t[1],B=t[2],E=t[3],w=E*H+C*F-B*G,u=E*G+B*H-D*F,s=E*F+D*G-C*H,A=-D*H-C*G-B*F;I[0]=w*E+A*-D+u*-B-s*-C;I[1]=u*E+A*-C+s*-D-w*-B;I[2]=s*E+A*-B+w*-C-u*-D;return I};e.scale=function(t,u,s){if(!s||t===s){t[0]*=u;t[1]*=u;t[2]*=u;t[3]*=u;return t}s[0]=t[0]*u;s[1]=t[1]*u;s[2]=t[2]*u;s[3]=t[3]*u;return s};e.toMat3=function(s,D){if(!D){D=h.create()}var E=s[0],C=s[1],B=s[2],F=s[3],J=E+E,t=C+C,G=B+B,A=E*J,v=E*t,u=E*G,I=C*t,H=C*G,M=B*G,N=F*J,L=F*t,K=F*G;
D[0]=1-(I+M);D[1]=v+K;D[2]=u-L;D[3]=v-K;D[4]=1-(A+M);D[5]=H+N;D[6]=u+L;D[7]=H-N;D[8]=1-(A+I);return D};e.toMat4=function(s,D){if(!D){D=g.create()}var E=s[0],C=s[1],B=s[2],F=s[3],J=E+E,t=C+C,G=B+B,A=E*J,v=E*t,u=E*G,I=C*t,H=C*G,M=B*G,N=F*J,L=F*t,K=F*G;D[0]=1-(I+M);D[1]=v+K;D[2]=u-L;D[3]=0;D[4]=v-K;D[5]=1-(A+M);D[6]=H+N;D[7]=0;D[8]=u+L;D[9]=H-N;D[10]=1-(A+I);D[11]=0;D[12]=0;D[13]=0;D[14]=0;D[15]=1;return D};e.slerp=function(t,u,v,A){if(!A){A=t}var w=t[0]*u[0]+t[1]*u[1]+t[2]*u[2]+t[3]*u[3],x,s,z,y;if(Math.abs(w)>=1){if(A!==t){A[0]=t[0];
A[1]=t[1];A[2]=t[2];A[3]=t[3]}return A}x=Math.acos(w);s=Math.sqrt(1-w*w);if(Math.abs(s)<0.001){A[0]=(t[0]*0.5+u[0]*0.5);A[1]=(t[1]*0.5+u[1]*0.5);A[2]=(t[2]*0.5+u[2]*0.5);A[3]=(t[3]*0.5+u[3]*0.5);return A}z=Math.sin((1-v)*x)/s;y=Math.sin(v*x)/s;A[0]=(t[0]*z+u[0]*y);A[1]=(t[1]*z+u[1]*y);A[2]=(t[2]*z+u[2]*y);A[3]=(t[3]*z+u[3]*y);return A};e.fromRotationMatrix=function(x,v){if(!v){v=e.create()}var s=x[0]+x[4]+x[8];var z;if(s>0){z=Math.sqrt(s+1);v[3]=0.5*z;z=0.5/z;v[0]=(x[7]-x[5])*z;v[1]=(x[2]-x[6])*z;
v[2]=(x[3]-x[1])*z}else{var y=e.fromRotationMatrix.s_iNext=e.fromRotationMatrix.s_iNext||[1,2,0];var w=0;if(x[4]>x[0]){w=1}if(x[8]>x[w*3+w]){w=2}var u=y[w];var t=y[u];z=Math.sqrt(x[w*3+w]-x[u*3+u]-x[t*3+t]+1);v[w]=0.5*z;z=0.5/z;v[3]=(x[t*3+u]-x[u*3+t])*z;v[u]=(x[u*3+w]+x[w*3+u])*z;v[t]=(x[t*3+w]+x[w*3+t])*z}return v};h.toQuat4=e.fromRotationMatrix;(function(){var s=h.create();e.fromAxes=function(u,w,t,v){s[0]=w[0];s[3]=w[1];s[6]=w[2];s[1]=t[0];s[4]=t[1];s[7]=t[2];s[2]=u[0];s[5]=u[1];s[8]=u[2];return e.fromRotationMatrix(s,v)
}})();e.identity=function(s){if(!s){s=e.create()}s[0]=0;s[1]=0;s[2]=0;s[3]=1;return s};e.fromAngleAxis=function(x,v,t){if(!t){t=e.create()}var w=x*0.5;var u=Math.sin(w);t[3]=Math.cos(w);t[0]=u*v[0];t[1]=u*v[1];t[2]=u*v[2];return t};e.toAngleAxis=function(v,t){if(!t){t=v}var s=v[0]*v[0]+v[1]*v[1]+v[2]*v[2];if(s>0){t[3]=2*Math.acos(v[3]);var u=m.invsqrt(s);t[0]=v[0]*u;t[1]=v[1]*u;t[2]=v[2]*u}else{t[3]=0;t[0]=1;t[1]=0;t[2]=0}return t};e.str=function(s){return"["+s[0]+", "+s[1]+", "+s[2]+", "+s[3]+"]"
};var d={};d.create=function(t){var s=new b(2);if(t){s[0]=t[0];s[1]=t[1]}else{s[0]=0;s[1]=0}return s};d.createFrom=function(s,u){var t=new b(2);t[0]=s;t[1]=u;return t};d.add=function(t,s,u){if(!u){u=s}u[0]=t[0]+s[0];u[1]=t[1]+s[1];return u};d.subtract=function(t,s,u){if(!u){u=s}u[0]=t[0]-s[0];u[1]=t[1]-s[1];return u};d.multiply=function(t,s,u){if(!u){u=s}u[0]=t[0]*s[0];u[1]=t[1]*s[1];return u};d.divide=function(t,s,u){if(!u){u=s}u[0]=t[0]/s[0];u[1]=t[1]/s[1];return u};d.scale=function(s,t,u){if(!u){u=s
}u[0]=s[0]*t;u[1]=s[1]*t;return u};d.dist=function(u,t){var s=t[0]-u[0],v=t[1]-u[1];return Math.sqrt(s*s+v*v)};d.set=function(t,s){s[0]=t[0];s[1]=t[1];return s};d.negate=function(t,s){if(!s){s=t}s[0]=-t[0];s[1]=-t[1];return s};d.normalize=function(t,s){if(!s){s=t}var u=t[0]*t[0]+t[1]*t[1];if(u>0){u=Math.sqrt(u);s[0]=t[0]/u;s[1]=t[1]/u}else{s[0]=s[1]=0}return s};d.cross=function(t,s,u){var v=t[0]*s[1]-t[1]*s[0];if(!u){return v}u[0]=u[1]=0;u[2]=v;return u};d.length=function(t){var s=t[0],u=t[1];return Math.sqrt(s*s+u*u)
};d.dot=function(t,s){return t[0]*s[0]+t[1]*s[1]};d.direction=function(v,u,w){if(!w){w=v}var t=v[0]-u[0],z=v[1]-u[1],s=t*t+z*z;if(!s){w[0]=0;w[1]=0;w[2]=0;return w}s=1/Math.sqrt(s);w[0]=t*s;w[1]=z*s;return w};d.lerp=function(t,s,v,u){if(!u){u=t}u[0]=t[0]+v*(s[0]-t[0]);u[1]=t[1]+v*(s[1]-t[1]);return u};d.str=function(s){return"["+s[0]+", "+s[1]+"]"};var i={};i.create=function(t){var s=new b(4);if(t){s[0]=t[0];s[1]=t[1];s[2]=t[2];s[3]=t[3]}else{s[0]=s[1]=s[2]=s[3]=0}return s};i.createFrom=function(u,t,w,v){var s=new b(4);
s[0]=u;s[1]=t;s[2]=w;s[3]=v;return s};i.set=function(t,s){s[0]=t[0];s[1]=t[1];s[2]=t[2];s[3]=t[3];return s};i.identity=function(s){if(!s){s=i.create()}s[0]=1;s[1]=0;s[2]=0;s[3]=1;return s};i.transpose=function(u,t){if(!t||u===t){var s=u[1];u[1]=u[2];u[2]=s;return u}t[0]=u[0];t[1]=u[2];t[2]=u[1];t[3]=u[3];return t};i.determinant=function(s){return s[0]*s[3]-s[2]*s[1]};i.inverse=function(x,v){if(!v){v=x}var u=x[0],t=x[1],s=x[2],y=x[3];var w=u*y-s*t;if(!w){return null}w=1/w;v[0]=y*w;v[1]=-t*w;v[2]=-s*w;
v[3]=u*w;return v};i.multiply=function(v,t,y){if(!y){y=v}var u=v[0],s=v[1],x=v[2],w=v[3];y[0]=u*t[0]+s*t[2];y[1]=u*t[1]+s*t[3];y[2]=x*t[0]+w*t[2];y[3]=x*t[1]+w*t[3];return y};i.rotate=function(z,t,x){if(!x){x=z}var A=z[0],y=z[1],v=z[2],u=z[3],B=Math.sin(t),w=Math.cos(t);x[0]=A*w+y*B;x[1]=A*-B+y*w;x[2]=v*w+u*B;x[3]=v*-B+u*w;return x};i.multiplyVec2=function(t,v,u){if(!u){u=v}var s=v[0],w=v[1];u[0]=s*t[0]+w*t[1];u[1]=s*t[2]+w*t[3];return u};i.scale=function(x,t,y){if(!y){y=x}var A=x[0],z=x[1],v=x[2],u=x[3],s=t[0],w=t[1];
y[0]=A*s;y[1]=z*w;y[2]=v*s;y[3]=u*w;return y};i.str=function(s){return"["+s[0]+", "+s[1]+", "+s[2]+", "+s[3]+"]"};var a={};a.create=function(t){var s=new b(4);if(t){s[0]=t[0];s[1]=t[1];s[2]=t[2];s[3]=t[3]}else{s[0]=0;s[1]=0;s[2]=0;s[3]=0}return s};a.createFrom=function(s,A,v,t){var u=new b(4);u[0]=s;u[1]=A;u[2]=v;u[3]=t;return u};a.add=function(t,s,u){if(!u){u=s}u[0]=t[0]+s[0];u[1]=t[1]+s[1];u[2]=t[2]+s[2];u[3]=t[3]+s[3];return u};a.subtract=function(t,s,u){if(!u){u=s}u[0]=t[0]-s[0];u[1]=t[1]-s[1];
u[2]=t[2]-s[2];u[3]=t[3]-s[3];return u};a.multiply=function(t,s,u){if(!u){u=s}u[0]=t[0]*s[0];u[1]=t[1]*s[1];u[2]=t[2]*s[2];u[3]=t[3]*s[3];return u};a.divide=function(t,s,u){if(!u){u=s}u[0]=t[0]/s[0];u[1]=t[1]/s[1];u[2]=t[2]/s[2];u[3]=t[3]/s[3];return u};a.scale=function(s,t,u){if(!u){u=s}u[0]=s[0]*t;u[1]=s[1]*t;u[2]=s[2]*t;u[3]=s[3]*t;return u};a.set=function(t,s){s[0]=t[0];s[1]=t[1];s[2]=t[2];s[3]=t[3];return s};a.negate=function(t,s){if(!s){s=t}s[0]=-t[0];s[1]=-t[1];s[2]=-t[2];s[3]=-t[3];return s
};a.lerp=function(t,s,v,u){if(!u){u=t}u[0]=t[0]+v*(s[0]-t[0]);u[1]=t[1]+v*(s[1]-t[1]);u[2]=t[2]+v*(s[2]-t[2]);u[3]=t[3]+v*(s[3]-t[3]);return u};a.str=function(s){return"["+s[0]+", "+s[1]+", "+s[2]+", "+s[3]+"]"};if(n){n.glMatrixArrayType=b;n.MatrixArray=b;n.setMatrixArrayType=r;n.determineMatrixArrayType=l;n.glMath=m;n.vec2=d;n.vec3=c;n.vec4=a;n.mat2=i;n.mat3=h;n.mat4=g;n.quat4=e}return{glMatrixArrayType:b,MatrixArray:b,setMatrixArrayType:r,determineMatrixArrayType:l,glMath:m,vec2:d,vec3:c,vec4:a,mat2:i,mat3:h,mat4:g,quat4:e}
}));function vxlCameraState(a){if(!(a instanceof vxlCamera)){alert("vxlCameraState needs a vxlCamera as argument");return null}this.c=a;this.position=vec3.createFrom(0,0,1);this.focalPoint=vec3.createFrom(0,0,0);this.up=vec3.createFrom(0,1,0);this.right=vec3.createFrom(1,0,0);this.distance=0;this.azimuth=0;this.elevation=0;this.xTr=0;this.yTr=0}