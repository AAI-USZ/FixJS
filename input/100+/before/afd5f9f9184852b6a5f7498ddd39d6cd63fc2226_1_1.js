function(c,b,a){c.jModal=function(q){var x="";var u="";var w="";var y="";var g=16;var t=70;var v=function(){$(".jmodal").bind("click.jmodal",function(A){A.preventDefault();var z=$(this);k($("body"));(z.data("type")==="image")?j(z,r):p(z,r)});if(!Array.prototype.indexOf){Array.prototype.indexOf=function(B,C){for(var A=(C||0),z=this.length;A<z;A++){if(this[A]===B){return A}}return -1}}};var j=function(C,B){var A=C;var z=document.createElement("img");z.onload=function(){B(z,C)};z.src=A.attr("href")};var p=function(C,B){var A=C;var z='<iframe width="640" height="390" src="http://www.youtube.com/embed/'+m(A.attr("href"))+'" frameborder="0" allowfullscreen></iframe>';B(z,A)};var m=function(B){var E=B.split("?");var D=E[1].split("&");var z="";for(var C=0;C<D.length;C++){if(D.indexOf("v=")){var A=D[C].split("=");z=A[1];break}}return z};var r=function(F,E){x=$('<div id="jmodal-modal"><div class="jmodal-content"></div><a href="#" class="jmodal-close">X</a></div>').appendTo("body");u=x.find(".jmodal-content");l();n();h(E);u.append(F);var A=x.outerHeight();var D=x.outerWidth();var z=u.height();var B=u.width();var C=f();x.css({height:z,"margin-left":((D/2)*-1),"margin-top":0,top:((A*-1)-10),width:B}).delay(400).animate({top:((C-A)/2)},300,function(){o(x);x.css({top:"50%","margin-top":((A/2)*-1)})})};var o=function(C){var B=$(C);var z=B.outerHeight();var A=f();$(".jmodal-close, #UIBlock").click(function(D){D.preventDefault();B.css({"margin-top":0,top:((A-z)/2)}).animate({top:((z*-1)-10)},300,function(){B.remove();s()})})};var h=function(B){var A="";if($(B).attr("rel")){var z=1;$("[rel="+$(B).attr("rel")+"]").each(function(){var C=($(this).attr("href")===$(B).attr("href"))?"selected":"";A+='<a href="'+$(this).attr("href")+'" class="jmodal-gallery-link '+C+'">'+z+"</a>";z++});x.addClass("jmodal-modal-gallery").append('<p class="jmodal-gallery-links"><a href="#" class="jmodal-gallery-prev">Prev</a>'+A+'<a href="#" class="jmodal-gallery-next">Next</a></p>');w=x.find(".selected");e()}};var e=function(){$(".jmodal-gallery-link").click(function(A){A.preventDefault();var z=$(this);if(!z.hasClass("selected")){d(z)}});$(".jmodal-gallery-prev").click(function(A){A.preventDefault();var z=w.prev().not(this);if(z.length!==0){d(z)}});$(".jmodal-gallery-next").click(function(A){A.preventDefault();var z=w.next().not(this);if(z.length!==0){d(z)}})};var d=function(z){u.find("img").animate({opacity:0},100);j(z,i)};var i=function(A,D){u.empty();w.removeClass("selected");w=$(D).addClass("selected");var B=$(A);B.appendTo(u).css({opacity:0});var z=B.height();var C=B.width();x.animate({height:z,"margin-left":((C+(g*2))/2)*-1,"margin-top":((z+(g+t))/2)*-1,width:C},300,function(){B.animate({opacity:1},300)})};var n=function(){if($("#UIBlock").length===0){$('<div id="UIBlock" />').css({background:"#000",height:"100%",left:0,opacity:0,position:"fixed",top:0,width:"100%","z-index":900}).appendTo("body").animate({opacity:0.8},180);if($.browser.msie&&($.browser.version<7)){$("#UIBlock").css({position:"absolute",top:$(window).scrollTop()})}}};var s=function(){$("#UIBlock").fadeOut(180,function(){$(this).remove()})};var k=function(z){y=$('<div id="modal-busyloader"></div>').appendTo(z).css({opacity:0,"margin-top":-50}).animate({opacity:1,"margin-top":-30},300)};var l=function(){y.animate({opacity:0,"margin-top":-50},200,function(){y.remove()})};var f=function(){var z=0;if(!window.innerHeight){if(!(document.documentElement.clientHeight===0)){z=document.documentElement.clientHeight}else{z=document.body.clientHeight}}else{z=window.innerHeight}return z};v()}}